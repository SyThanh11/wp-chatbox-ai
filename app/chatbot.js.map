{"version":3,"file":"chatbot.js","mappings":"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;AACA;AACA,GAAG,IAAI;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,sDAAS;AAChC,EAAE,kDAAqB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mGAA6B;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,yCAAY;AAC3B,YAAY,4DAAc;AAC1B,kBAAkB,yCAAY;AAC9B,6BAA6B,yCAAY;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,kDAAqB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,wBAAwB,gDAAmB,aAAa,8EAAQ,GAAG;AACnE;AACA;AACA,KAAK;AACL;AACA;AACA,2BAA2B,6CAAgB;;AAEf;;;;;;;;;;;;;;;;;ACjOF;;AAE1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,mDAAY;AAChC,SAAS,wDAAiB;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEqC;;;;;;;;;;;;;;;;;AC1BG;;AAExC,YAAY,kDAAe;;AAEC;;;;;;;;;;;;;;;;;;ACJF;AAC2C;;AAErE;AACA,YAAY,mDAAY;AACxB,EAAE,wEAAyB;AAC3B;AACA,GAAG;AACH;AACA;;AAEgC;;;;;;;;;;;ACXhC;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;ACNA;AACA;;AAEA,MAAM;EAAEiQ;AAAO,CAAC,GAAGp9B,EAAE,CAACC,OAAO;AAC0B;AACQ;AAE/D,SAASo9B,kBAAkBA,CAACC,UAAU,EAAE;EACtC,MAAMC,QAAQ,GAAGjvB,QAAQ,CAAClJ,aAAa,CAAC,UAAU,CAAC;EACnDm4B,QAAQ,CAAC5P,SAAS,GAAG2P,UAAU;EAC/B,OAAOC,QAAQ,CAACnkB,KAAK;AACvB;AAEA9K,QAAQ,CAACwV,gBAAgB,CAAC,kBAAkB,EAAE,YAAW;EAEvD,SAAS0Z,iBAAiBA,CAACC,UAAU,EAAElV,SAAS,EAAE;IAChDkV,UAAU,CAACra,OAAO,CAAEsa,SAAS,IAAK;MAChC,MAAMzzB,MAAM,GAAG0K,IAAI,CAACC,KAAK,CAACyoB,kBAAkB,CAACK,SAAS,CAACC,YAAY,CAAC,aAAa,CAAC,CAAC,CAAC;MACpF,MAAMzzB,MAAM,GAAGyK,IAAI,CAACC,KAAK,CAACyoB,kBAAkB,CAACK,SAAS,CAACC,YAAY,CAAC,aAAa,CAAC,CAAC,CAAC;MACpF,MAAMxzB,KAAK,GAAGwK,IAAI,CAACC,KAAK,CAACyoB,kBAAkB,CAACK,SAAS,CAACC,YAAY,CAAC,YAAY,CAAC,CAAC,CAAC;MAClFD,SAAS,CAACE,eAAe,CAAC,aAAa,CAAC;MACxCF,SAAS,CAACE,eAAe,CAAC,aAAa,CAAC;MACxCF,SAAS,CAACE,eAAe,CAAC,YAAY,CAAC;MACvCR,MAAM,CAAC7U,SAAS,CAAC;QAAEre,MAAM;QAAED,MAAM;QAAEE;MAAM,CAAC,CAAC,EAAEuzB,SAAS,CAAC;IACzD,CAAC,CAAC;EACJ;EAEA,MAAMG,iBAAiB,GAAGvvB,QAAQ,CAACwb,gBAAgB,CAAC,yBAAyB,CAAC;EAC9E0T,iBAAiB,CAACK,iBAAiB,EAAE5S,kEAAa,CAAC;EAEnD,MAAM6S,qBAAqB,GAAGxvB,QAAQ,CAACwb,gBAAgB,CAAC,6BAA6B,CAAC;EACtF0T,iBAAiB,CAACM,qBAAqB,EAAErL,sEAAiB,CAAC;AAE7D,CAAC,CAAC,C","sources":["webpack://wp-chatbot-ai/./app/js/chatbot/AudioVisualizer.js","webpack://wp-chatbot-ai/./app/js/chatbot/ChatUploadIcon.js","webpack://wp-chatbot-ai/./app/js/chatbot/ChatbotContext.js","webpack://wp-chatbot-ai/./app/js/chatbot/ChatbotHeader.js","webpack://wp-chatbot-ai/./app/js/chatbot/ChatbotInput.js","webpack://wp-chatbot-ai/./app/js/chatbot/ChatbotName.js","webpack://wp-chatbot-ai/./app/js/chatbot/ChatbotRealtime.js","webpack://wp-chatbot-ai/./app/js/chatbot/ChatbotReply.js","webpack://wp-chatbot-ai/./app/js/chatbot/ChatbotSpinners.js","webpack://wp-chatbot-ai/./app/js/chatbot/ChatbotSubmit.js","webpack://wp-chatbot-ai/./app/js/chatbot/ChatbotSystem.js","webpack://wp-chatbot-ai/./app/js/chatbot/ChatbotTrigger.js","webpack://wp-chatbot-ai/./app/js/chatbot/ChatbotUI.js","webpack://wp-chatbot-ai/./app/js/chatbot/DiscussionsContext.js","webpack://wp-chatbot-ai/./app/js/chatbot/DiscussionsSystem.js","webpack://wp-chatbot-ai/./app/js/chatbot/DiscussionsUI.js","webpack://wp-chatbot-ai/./app/js/chatbot/MwaiAPI.js","webpack://wp-chatbot-ai/./app/js/chatbot/helpers.js","webpack://wp-chatbot-ai/./app/js/components/ReplyActions.js","webpack://wp-chatbot-ai/./app/js/helpers.js","webpack://wp-chatbot-ai/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://wp-chatbot-ai/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://wp-chatbot-ai/./node_modules/lucide-react/dist/esm/Icon.js","webpack://wp-chatbot-ai/./node_modules/lucide-react/dist/esm/createLucideIcon.js","webpack://wp-chatbot-ai/./node_modules/lucide-react/dist/esm/defaultAttributes.js","webpack://wp-chatbot-ai/./node_modules/lucide-react/dist/esm/icons/bug.js","webpack://wp-chatbot-ai/./node_modules/lucide-react/dist/esm/icons/captions.js","webpack://wp-chatbot-ai/./node_modules/lucide-react/dist/esm/icons/eraser.js","webpack://wp-chatbot-ai/./node_modules/lucide-react/dist/esm/icons/loader.js","webpack://wp-chatbot-ai/./node_modules/lucide-react/dist/esm/icons/mic.js","webpack://wp-chatbot-ai/./node_modules/lucide-react/dist/esm/icons/pause.js","webpack://wp-chatbot-ai/./node_modules/lucide-react/dist/esm/icons/pencil.js","webpack://wp-chatbot-ai/./node_modules/lucide-react/dist/esm/icons/play.js","webpack://wp-chatbot-ai/./node_modules/lucide-react/dist/esm/icons/send.js","webpack://wp-chatbot-ai/./node_modules/lucide-react/dist/esm/icons/square.js","webpack://wp-chatbot-ai/./node_modules/lucide-react/dist/esm/icons/trash.js","webpack://wp-chatbot-ai/./node_modules/lucide-react/dist/esm/icons/users.js","webpack://wp-chatbot-ai/./node_modules/lucide-react/dist/esm/shared/src/utils.js","webpack://wp-chatbot-ai/./node_modules/markdown-to-jsx/dist/index.modern.js","webpack://wp-chatbot-ai/./node_modules/react-textarea-autosize/dist/react-textarea-autosize.browser.development.esm.js","webpack://wp-chatbot-ai/./node_modules/use-composed-ref/dist/use-composed-ref.esm.js","webpack://wp-chatbot-ai/./node_modules/use-isomorphic-layout-effect/dist/use-isomorphic-layout-effect.browser.esm.js","webpack://wp-chatbot-ai/./node_modules/use-latest/dist/use-latest.esm.js","webpack://wp-chatbot-ai/external var \"React\"","webpack://wp-chatbot-ai/webpack/bootstrap","webpack://wp-chatbot-ai/webpack/runtime/compat get default export","webpack://wp-chatbot-ai/webpack/runtime/define property getters","webpack://wp-chatbot-ai/webpack/runtime/hasOwnProperty shorthand","webpack://wp-chatbot-ai/webpack/runtime/make namespace object","webpack://wp-chatbot-ai/./app/js/chatbot.js"],"sourcesContent":["// Previous: 2.7.0\n// Current: 2.7.7\n\nconst { useState, useRef, useEffect } = wp.element;\n\nfunction measureVolume(analyser, dataArray) {\n  analyser.getByteTimeDomainData(dataArray);\n  let sum = 0;\n  for (let i = 0; i < dataArray.length; i++) {\n    const val = dataArray[i] - 128;\n    sum += val * val;\n  }\n  return Math.sqrt(sum / dataArray.length);\n}\n\nexport default function AudioVisualizerTwoStreams({\n  assistantStream = null,\n  userStream = null,\n  assistantColor = null,\n  userColor = null,\n  userUI = { emoji: null, text: null, image: null, use: \"text\" },\n  assistantUI = { emoji: null, text: null, image: null, use: \"text\" },\n  attackSpeed = 0.3,\n  releaseSpeed = 0.05,\n  circleSize = 50,\n  pulseMaxSize = 30,\n}) {\n  const [assistantVolume, setAssistantVolume] = useState(0);\n  const [userVolume, setUserVolume] = useState(0);\n\n  const assistantSmoothedRef = useRef(0);\n  const userSmoothedRef = useRef(0);\n\n  const audioContextRef = useRef(null);\n  const assistantAnalyserRef = useRef(null);\n  const assistantDataArrayRef = useRef(null);\n  const userAnalyserRef = useRef(null);\n  const userDataArrayRef = useRef(null);\n\n  useEffect(() => {\n    if (!assistantStream && !userStream) {\n      return;\n    }\n\n    if (!audioContextRef.current) {\n      audioContextRef.current = new AudioContext();\n    }\n    const audioContext = audioContextRef.current;\n\n    let assistantSource = null;\n    let userSource = null;\n    let animationFrameId = null;\n\n    if (assistantStream) {\n      assistantSource = audioContext.createMediaStreamSource(assistantStream);\n      assistantAnalyserRef.current = audioContext.createAnalyser();\n      assistantAnalyserRef.current.fftSize = 1024;\n      assistantDataArrayRef.current = new Uint8Array(\n        assistantAnalyserRef.current.frequencyBinCount\n      );\n      assistantSource.connect(assistantAnalyserRef.current);\n    }\n\n    if (userStream) {\n      userSource = audioContext.createMediaStreamSource(userStream);\n      userAnalyserRef.current = audioContext.createAnalyser();\n      userAnalyserRef.current.fftSize = 1024;\n      userDataArrayRef.current = new Uint8Array(\n        userAnalyserRef.current.frequencyBinCount\n      );\n      userSource.connect(userAnalyserRef.current);\n    }\n\n    const tick = () => {\n      let newAssistantVolume = 0;\n      if (assistantAnalyserRef.current && assistantDataArrayRef.current) {\n        newAssistantVolume = measureVolume(\n          assistantAnalyserRef.current,\n          assistantDataArrayRef.current\n        );\n      }\n      let newUserVolume = 0;\n      if (userAnalyserRef.current && userDataArrayRef.current) {\n        newUserVolume = measureVolume(\n          userAnalyserRef.current,\n          userDataArrayRef.current\n        );\n      }\n\n      if (newAssistantVolume > assistantSmoothedRef.current) {\n        assistantSmoothedRef.current =\n          assistantSmoothedRef.current * (1 - attackSpeed) +\n          newAssistantVolume * attackSpeed;\n      } else {\n        assistantSmoothedRef.current =\n          assistantSmoothedRef.current * (1 - releaseSpeed) +\n          newAssistantVolume * releaseSpeed;\n      }\n\n      if (newUserVolume > userSmoothedRef.current) {\n        userSmoothedRef.current =\n          userSmoothedRef.current * (1 - attackSpeed) +\n          newUserVolume * attackSpeed;\n      } else {\n        userSmoothedRef.current =\n          userSmoothedRef.current * (1 - releaseSpeed) +\n          newUserVolume * releaseSpeed;\n      }\n\n      setAssistantVolume(assistantSmoothedRef.current);\n      setUserVolume(userSmoothedRef.current);\n      animationFrameId = requestAnimationFrame(tick);\n    };\n    tick();\n\n    return () => {\n      if (assistantSource) assistantSource.disconnect();\n      if (assistantAnalyserRef.current) assistantAnalyserRef.current.disconnect();\n      if (userSource) userSource.disconnect();\n      if (userAnalyserRef.current) userAnalyserRef.current.disconnect();\n      if (animationFrameId) cancelAnimationFrame(animationFrameId);\n    };\n  }, [assistantStream, userStream, attackSpeed, releaseSpeed]);\n\n  const normAssistant = Math.min(assistantVolume / 20, 1);\n  const normUser = Math.min(userVolume / 20, 1);\n\n  const assistantPulseDiameter = circleSize + normAssistant * pulseMaxSize;\n  const userPulseDiameter = circleSize + normUser * pulseMaxSize;\n  const containerSize = circleSize + pulseMaxSize;\n\n  const userPulseStyle = {\n    width: userPulseDiameter,\n    height: userPulseDiameter,\n    borderRadius: \"50%\",\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    transform: \"translate(-50%, -50%)\",\n    opacity: 0.5,\n  };\n  if (userColor !== null) {\n    userPulseStyle.backgroundColor = userColor;\n  }\n\n  const assistantPulseStyle = {\n    width: assistantPulseDiameter,\n    height: assistantPulseDiameter,\n    borderRadius: \"50%\",\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    transform: \"translate(-50%, -50%)\",\n    opacity: 0.5,\n  };\n  if (assistantColor !== null) {\n    assistantPulseStyle.backgroundColor = assistantColor;\n  }\n\n  const userCircleStyle = {\n    width: circleSize,\n    height: circleSize,\n    borderRadius: \"50%\",\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    transform: \"translate(-50%, -50%)\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    overflow: \"hidden\",\n    color: \"#fff\",\n  };\n  if (userColor !== null) {\n    userCircleStyle.backgroundColor = userColor;\n  }\n\n  const assistantCircleStyle = {\n    width: circleSize,\n    height: circleSize,\n    borderRadius: \"50%\",\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    transform: \"translate(-50%, -50%)\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    overflow: \"hidden\",\n    color: \"#fff\",\n  };\n  if (assistantColor !== null) {\n    assistantCircleStyle.backgroundColor = assistantColor;\n  }\n\n  let containerClass = \"mwai-visualizer\";\n  if (userVolume > assistantVolume) {\n    containerClass += \" mwai-user-talking\";\n  } else if (assistantVolume > userVolume) {\n    containerClass += \" mwai-assistant-talking\";\n  }\n\n  const renderUI = (uiObj) => {\n    if (!uiObj) return null;\n    const { emoji, text, image, use } = uiObj;\n\n    switch (use) {\n    case \"emoji\":\n      if (emoji) return <span>{emoji}</span>;\n      if (text) return <span>{text.slice(0, 1)}</span>;\n      return null;\n    case \"image\":\n      if (image) {\n        return (\n          <img\n            src={image}\n            alt=\"\"\n            style={{ width: \"100%\", height: \"100%\", borderRadius: \"50%\" }}\n          />\n        );\n      }\n      if (emoji) return <span>{emoji}</span>;\n      if (text) return <span>{text.slice(0, 1)}</span>;\n      return null;\n    case \"text\":\n    default:\n      if (text) return <span>{text.slice(0, 1)}</span>;\n      if (emoji) return <span>{emoji}</span>;\n      return null;\n    }\n  };\n\n  return (\n    <div className={containerClass}>\n      <div\n        className=\"mwai-visualizer-user\"\n        style={{\n          position: \"relative\",\n          width: containerSize,\n          height: containerSize,\n          overflow: \"visible\",\n        }}\n      >\n        <div className=\"mwai-animation\" style={userPulseStyle} />\n\n        <div style={userCircleStyle}>{renderUI(userUI)}</div>\n      </div>\n\n      <hr className=\"mwai-visualizer-line\" />\n\n      <div\n        className=\"mwai-visualizer-assistant\"\n        style={{\n          position: \"relative\",\n          width: containerSize,\n          height: containerSize,\n          overflow: \"visible\",\n        }}\n      >\n        <div className=\"mwai-animation\" style={assistantPulseStyle} />\n\n        <div style={assistantCircleStyle}>{renderUI(assistantUI)}</div>\n      </div>\n    </div>\n  );\n}","// Previous: 2.4.5\n// Current: 2.6.8\n\nimport { useChatbotContext } from \"./ChatbotContext\";\nimport { useClasses } from \"./helpers\";\n\n// React & Vendor Libs\nconst { useState, useMemo, useRef } = wp.element;\n\nconst ChatUploadIcon = () => {\n  const css = useClasses();\n  const { state, actions } = useChatbotContext();\n  const { uploadedFile, busy, imageUpload, fileUpload, fileSearch, draggingType } = state;\n  const { onUploadFile } = actions;\n  const [ isHovering, setIsHovering ] = useState(false);\n\n  const fileInputRef = useRef();\n  const hasUploadedFile = uploadedFile?.uploadedId;\n  const uploadEnabled = imageUpload || fileSearch || fileUpload;\n\n  const handleMouseEnter = () => setIsHovering(true);\n  const handleMouseLeave = () => setIsHovering(false);\n  const resetUpload = () => onUploadFile(null);\n\n  const handleClick = () => {\n    if (uploadedFile?.localFile) {\n      resetUpload();\n      return;\n    }\n    if (!busy) {\n      fileInputRef.current.click();\n    }\n  };\n\n  const handleFileChange = (event) => {\n    const file = event.target.files[0];\n    if (file) onUploadFile(file);\n  };\n\n  const file = uploadedFile;\n\n  const type = useMemo(() => {\n    if (file?.localFile) {\n      return file.localFile.type.startsWith('image/') ? 'image' : 'document';\n    }\n    return draggingType;\n  }, [file, draggingType]);\n\n  const imgClass = useMemo(() => {\n    let status = 'idle';\n    if (file?.uploadProgress) {\n      status = 'up';\n    }\n    else if (draggingType) {\n      status = 'add';\n    }\n    else if (isHovering && hasUploadedFile) {\n      status = 'del';\n    }\n    else if (hasUploadedFile) {\n      status = 'ok';\n    }\n    else if (isHovering && !hasUploadedFile) {\n      status = 'add';\n    }\n\n    const typeClass = type ? type.toLowerCase() : 'idle';\n    return `mwai-file-upload-icon mwai-${typeClass}-${status}`;\n  }, [type, file, draggingType, isHovering, hasUploadedFile]);\n\n  const uploadProgress = useMemo(() => {\n    if (file?.uploadProgress) {\n      if (file.uploadProgress > 99) {\n        return 99;\n      }\n      return Math.round(file.uploadProgress);\n    }\n    return \"\";\n  }, [file]);\n\n  return uploadEnabled ? (\n    <div disabled={busy} onClick={handleClick}\n      onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave}\n      className={css('mwai-file-upload', {\n        'mwai-enabled': uploadedFile?.uploadedId,\n        'mwai-busy': uploadedFile?.localFile && !uploadedFile?.uploadedId,\n      })}\n      style={{ cursor: busy ? 'default' : 'pointer' }}>\n      <div className={imgClass}>\n        <span className=\"mwai-file-upload-progress\">\n          {uploadProgress}\n        </span>\n      </div>\n      <input type=\"file\" ref={fileInputRef} onChange={handleFileChange} style={{ display: 'none' }} />\n    </div>\n  ) : null;\n};\n\nexport default ChatUploadIcon;","// Previous: 2.7.3\n// Current: 2.7.7\n\nconst { useContext, createContext, useState, useMemo, useEffect, useCallback, useRef } = wp.element;\n\nimport { processParameters, isURL, useChrono, useSpeechRecognition, doPlaceholders} from '@app/chatbot/helpers';\nimport { applyFilters } from '@app/chatbot/MwaiAPI';\nimport { mwaiHandleRes, mwaiFetch, randomStr, mwaiFetchUpload, isEmoji, nekoStringify } from '@app/helpers';\nimport { mwaiAPI } from '@app/chatbot/MwaiAPI';\n\nconst rawAiName = 'AI: ';\nconst rawUserName = 'User: ';\nconst ChatbotContext = createContext();\n\nexport const useChatbotContext = () => {\n  const context = useContext(ChatbotContext);\n  if (!context) {\n    throw new Error('useChatbotContext must be used within a ChatbotContextProvider');\n  }\n  return context;\n};\n\nexport const ChatbotContextProvider = ({ children, ...rest }) => {\n  const { params, system, theme, atts } = rest;\n  const { timeElapsed, startChrono, stopChrono } = useChrono();\n  const shortcodeStyles = useMemo(() => theme?.settings || {}, [theme]);\n  const [ restNonce, setRestNonce ] = useState(system.restNonce);\n  const [ messages, setMessages ] = useState([]);\n  const [ shortcuts, setShortcuts ] = useState([]);\n  const [ blocks, setBlocks ] = useState([]);\n  const [ locked, setLocked ] = useState(false);\n  const [ chatId, setChatId ] = useState(randomStr());\n  const [ inputText, setInputText ] = useState('');\n  const [ chatbotTriggered, setChatbotTriggered ] = useState(false);\n  const [ showIconMessage, setShowIconMessage ] = useState(false);\n  const [ uploadedFile, setUploadedFile ] = useState({\n    localFile: null,\n    uploadedId: null,\n    uploadedUrl: null,\n    uploadProgress: null,\n  });\n  const [ windowed, setWindowed ] = useState(true);\n  const [ open, setOpen ] = useState(false);\n  const [ error, setError ] = useState(null);\n  const [ busy, setBusy ] = useState(false);\n  const [ busyNonce, setBusyNonce ] = useState(false);\n  const [ serverReply, setServerReply ] = useState();\n  const chatbotInputRef = useRef();\n  const conversationRef = useRef();\n  const hasFocusRef = useRef(false);\n  const { isListening, setIsListening, speechRecognitionAvailable } = useSpeechRecognition(text => {\n    setInputText(text);\n  });\n\n  const stream = system.stream ?? false; // Changed ?? to ?? for consistency\n  const internalId = useMemo(() => randomStr(), []);\n  const botId = system.botId;\n  const customId = system.customId;\n  const userData = system.userData;\n  const sessionId = system.sessionId;\n  const contextId = system.contextId;\n  const pluginUrl = system.pluginUrl;\n  const restUrl = system.restUrl;\n  const debugMode = system.debugMode;\n  const virtualKeyboardFix = system.virtual_keyboard_fix;\n  const typewriter = system?.typewriter ?? false;\n  const speechRecognition = system?.speech_recognition ?? false;\n  const speechSynthesis = system?.speech_synthesis ?? false;\n  const startSentence = doPlaceholders(params.startSentence?.trim() ?? \"\", userData);\n\n  const initialActions = system.actions ?? [];\n  const initialShortcuts = system.shortcuts ?? [];\n  const initialBlocks = system.blocks ?? [];\n\n  const isMobile = document.innerWidth <= 768;\n  const processedParams = processParameters(params, userData);\n  const { aiName, userName, guestName, aiAvatar, userAvatar, guestAvatar } = processedParams;\n  const {\n    textSend, textClear, textInputMaxLength, textInputPlaceholder, textCompliance,\n    window: isWindow, copyButton, headerSubtitle, fullscreen, localMemory: localMemoryParam,\n    icon, iconText, iconTextDelay, iconAlt, iconPosition, iconBubble, imageUpload, fileUpload, fileSearch\n  } = processedParams;\n  const isRealtime = processedParams.mode === 'realtime';\n  const localMemory = localMemoryParam && (!!customId || !!botId);\n  const localStorageKey = localMemory ? `mwai-chat-${customId || botId}` : null;\n  const { cssVariables, iconUrl, aiAvatarUrl, userAvatarUrl, guestAvatarUrl } = useMemo(() => {\n    const processUrl = (url) => {\n      if (!url) return null;\n      if (isEmoji(url)) return url;\n      return isURL(url) ? url : `${pluginUrl}/images/${url}`;\n    };\n    const iconUrl = icon ? processUrl(icon) : `${pluginUrl}/images/chat-traditional-1.svg`;\n    const finalAiAvatarUrl = processUrl(processedParams.aiAvatarUrl);\n    const finalUserAvatarUrl = processUrl(processedParams.userAvatarUrl);\n    const finalGuestAvatarUrl = processUrl(processedParams.guestAvatarUrl);\n    const cssVariables = Object.keys(shortcodeStyles).reduce((acc, key) => {\n      acc[`--mwai-${key}`] = shortcodeStyles[key];\n      return acc;\n    }, {});\n    return {\n      cssVariables,\n      iconUrl,\n      aiAvatarUrl: finalAiAvatarUrl,\n      userAvatarUrl: finalUserAvatarUrl,\n      guestAvatarUrl: finalGuestAvatarUrl\n    };\n  }, [icon, pluginUrl, shortcodeStyles, processedParams]);\n\n  const [ draggingType, setDraggingType ] = useState(false);\n  const [ isBlocked, setIsBlocked ] = useState(false);\n\n  const uploadIconPosition = useMemo(() => {\n    if (theme?.themeId === 'timeless') {\n      return 'mwai-tools';\n    }\n    return \"mwai-input\";\n  }, [theme?.themeId]);\n\n  const submitButtonConf = useMemo(() => {\n    return {\n      text: textSend,\n      textSend: textSend,\n      textClear: textClear,\n      imageSend: theme?.themeId === 'timeless' ? pluginUrl + '/images/action-submit-blue.svg' : null,\n      imageClear: theme?.themeId === 'timeless' ? pluginUrl + '/images/action-clear-blue.svg' : null,\n    };\n  }, [pluginUrl, textClear, textSend, theme?.themeId]);\n\n  const resetMessages = () => {\n    resetUploadedFile();\n    if (startSentence) {\n      const freshMessages = [{\n        id: randomStr(),\n        role: 'assistant',\n        content: startSentence,\n        who: rawAiName,\n        timestamp: new Date().getTime(),\n      }];\n      setMessages(freshMessages);\n    } else {\n      setMessages([]);\n    }\n  };\n\n  const refreshRestNonce = useCallback(async (force = false) => {\n    try {\n      if (!force && restNonce) {\n        return restNonce;\n      }\n      setBusyNonce(true);\n      const res = await mwaiFetch(`${restUrl}/mwai/v1/start_session`);\n      const data = await res.json();\n      setRestNonce(data.restNonce);\n      return data.restNonce;\n    }\n    catch (err) {\n      console.error('Error while fetching the restNonce.', err);\n    }\n    finally {\n      setBusyNonce(false);\n    }\n  }, [restNonce, setRestNonce, restUrl]);\n\n  useEffect(() => {\n    if (initialActions.length > 0) {\n      handleActions(initialActions);\n    }\n    if (initialShortcuts.length > 0) {\n      handleShortcuts(initialShortcuts);\n    }\n    if (initialBlocks.length > 0) {\n      handleBlocks(initialBlocks);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (chatbotTriggered && !restNonce) {\n      refreshRestNonce();\n    }\n  }, [chatbotTriggered, restNonce]); // added restNonce dependency\n\n  useEffect(() => {\n    if (inputText.length > 0 && !chatbotTriggered) {\n      setChatbotTriggered(true);\n    }\n  }, [chatbotTriggered, inputText]);\n\n  useEffect(() => {\n    resetMessages();\n  }, [startSentence]);\n\n  useEffect(() => {\n    if (customId || botId) {\n      const existingChatbotIndex = mwaiAPI.chatbots.findIndex(\n        (chatbot) => chatbot.internalId === internalId\n      );\n      const chatbot = {\n        internalId: internalId,\n        botId: botId,\n        chatId: chatId,\n        customId: customId,\n        open: () => {\n          setTasks((prevTasks) => [...prevTasks, { action: 'open' }]);\n        },\n        close: () => {\n          setTasks((prevTasks) => [...prevTasks, { action: 'close' }]);\n        },\n        clear: (params) => {\n          const { chatId = null } = params || {};\n          setTasks((prevTasks) => [...prevTasks, { action: 'clear', data: { chatId } }]);\n        },\n        toggle: () => {\n          setTasks((prevTasks) => [...prevTasks, { action: 'toggle' }]);\n        },\n        ask: (text, submit = false) => {\n          setTasks((prevTasks) => [...prevTasks, { action: 'ask', data: { text, submit } }]);\n        },\n        lock: () => {\n          setLocked(true);\n        },\n        unlock: () => {\n          setLocked(false);\n        },\n        setShortcuts: (shortcuts) => {\n          setTasks((prevTasks) => [...prevTasks, { action: 'setShortcuts', data: shortcuts }]);\n        },\n        setBlocks: (blocks) => {\n          setTasks((prevTasks) => [...prevTasks, { action: 'setBlocks', data: blocks }]);\n        },\n        addBlock: (block) => {\n          setTasks((prevTasks) => [...prevTasks, { action: 'addBlock', data: block }]);\n        },\n        removeBlockById: (blockId) => {\n          setTasks((prevTasks) => [...prevTasks, { action: 'removeBlockById', data: blockId }]);\n        },\n        getBlocks: () => {\n          return blocks;\n        },\n        setContext: ({ chatId, messages }) => {\n          setTasks((prevTasks) => [...prevTasks, { action: 'setContext', data: { chatId, messages } }]);\n        },\n      };\n      if (existingChatbotIndex !== -1) {\n        mwaiAPI.chatbots[existingChatbotIndex] = chatbot;\n      } else {\n        mwaiAPI.chatbots.push(chatbot);\n      }\n    }\n  }, [botId, chatId, customId, internalId, blocks, messages]);\n\n  useEffect(() => {\n    if (busy) {\n      startChrono();\n      return;\n    }\n    if (!isMobile && hasFocusRef.current) {\n      // Potential bug: focusInput might be undefined if ref's current element is not properly set.\n      chatbotInputRef.current.focusInput && chatbotInputRef.current.focusInput();\n    }\n    stopChrono();\n  }, [busy, isMobile, startChrono, stopChrono]);\n\n  const saveMessages = useCallback((messages) => {\n    if (!localStorageKey) {\n      return;\n    }\n    localStorage.setItem(localStorageKey, nekoStringify({\n      chatId: chatId,\n      messages: messages,\n    }));\n  }, [localStorageKey, chatId]);\n\n  const resetError = () => {\n    setError(null);\n  };\n\n  useEffect(() => {\n    let chatHistory = [];\n    if (localStorageKey) {\n      chatHistory = localStorage.getItem(localStorageKey);\n      if (chatHistory) {\n        try {\n          chatHistory = JSON.parse(chatHistory);\n          setMessages(chatHistory.messages);\n          setChatId(chatHistory.chatId);\n        } catch (e) {\n          // faulty parsing could cause silent failure but keep fallback\n        }\n        return;\n      }\n    }\n    resetMessages();\n  }, [botId]); // Potential bug: depends only on botId, but should depend on localStorageKey?\n\n  const handleActions = useCallback((actions, lastMessage) => {\n    actions = actions || [];\n    let callsCount = 0;\n    for (const action of actions) {\n      if (action.type === 'function') {\n        const data = action.data || {};\n        const { name = null, args = [] } = data;\n        const finalArgs = args ? Object.values(args).map((arg) => {\n          return JSON.stringify(arg);\n        }) : [];\n        try {\n          if (debugMode) {\n            console.log(`[CHATBOT] CALL ${name}(${finalArgs.join(', ')})`);\n          }\n          // Potential bug: eval with string interpolation may evaluate unintended code if name is malicious.\n          eval(`${name}(${finalArgs.join(', ')})`);\n          callsCount++;\n        }\n        catch (err) {\n          console.error('Error while executing an action.', err);\n        }\n      }\n    }\n    if (!lastMessage.content && callsCount > 0) {\n      lastMessage.content = `*Done!*`;\n    }\n  }, [debugMode]);\n\n  const handleShortcuts = useCallback((shortcuts) => {\n    setShortcuts(shortcuts || []);\n  }, []);\n\n  const handleBlocks = useCallback((blocks) => {\n    setBlocks(blocks || []);\n  }, []);\n\n  useEffect(() => {\n    if (!serverReply) return;\n    setBusy(false);\n    const freshMessages = [...messages];\n    const lastMessage = freshMessages.length > 0 ? freshMessages[freshMessages.length -1] : null;\n\n    if (!serverReply.success) {\n      if (lastMessage && lastMessage.role === 'assistant' && lastMessage.isQuerying) {\n        freshMessages.pop();\n      }\n      if (lastMessage && lastMessage.role === 'user') {\n        freshMessages.pop();\n      }\n      freshMessages.push({\n        id: randomStr(),\n        role: 'system',\n        content: serverReply.message,\n        who: rawAiName,\n        timestamp: new Date().getTime(),\n      });\n      setMessages(freshMessages);\n      saveMessages(freshMessages);\n      return;\n    }\n\n    if (lastMessage && lastMessage.role === 'assistant' && lastMessage.isQuerying) {\n      lastMessage.content = applyFilters('ai.reply', serverReply.reply, { chatId, botId });\n      if (serverReply.images) {\n        lastMessage.images = serverReply.images;\n      }\n      lastMessage.timestamp = new Date().getTime();\n      delete lastMessage.isQuerying;\n      handleActions(serverReply?.actions, lastMessage);\n      handleBlocks(serverReply?.blocks);\n      handleShortcuts(serverReply?.shortcuts);\n    } else if (lastMessage && lastMessage.role === 'assistant' && lastMessage.isStreaming) {\n      lastMessage.content = applyFilters('ai.reply', serverReply.reply, { chatId, botId });\n      if (serverReply.images) {\n        lastMessage.images = serverReply.images;\n      }\n      lastMessage.timestamp = new Date().getTime();\n      delete lastMessage.isStreaming;\n      handleActions(serverReply?.actions, lastMessage);\n      handleBlocks(serverReply?.blocks);\n      handleShortcuts(serverReply?.shortcuts);\n    } else {\n      const newMessage = {\n        id: randomStr(),\n        role: 'assistant',\n        content: applyFilters('ai.reply', serverReply.reply, { botId, chatId, customId }),\n        who: rawAiName,\n        timestamp: new Date().getTime(),\n      };\n      if (serverReply.images) {\n        newMessage.images = serverReply.images;\n      }\n      handleActions(serverReply?.actions, newMessage);\n      handleBlocks(serverReply?.blocks);\n      handleShortcuts(serverReply?.shortcuts);\n      // Potential bug: still push even if serverReply.reply is undefined (possible if reply is null)\n      // but assume acceptable.\n      freshMessages.push(newMessage);\n    }\n    setMessages(freshMessages);\n    saveMessages(freshMessages);\n  }, [serverReply, messages, handleActions, handleBlocks, handleShortcuts, saveMessages, chatId, botId, customId]);\n\n  const onClear = useCallback(async ({ chatId = null } = {}) => {\n    if (!chatId) {\n      chatId = randomStr();\n    }\n    await setChatId(chatId);\n    if (localStorageKey) {\n      localStorage.removeItem(localStorageKey);\n    }\n    resetMessages();\n    setInputText('');\n    setShortcuts([]);\n    setBlocks([]);\n  }, [localStorageKey, resetMessages]);\n\n  const onStartRealtimeSession = useCallback(async () => {\n    const body = {\n      botId: botId,\n      customId: customId,\n      contextId: contextId,\n      chatId: chatId,\n    };\n    const nonce = restNonce ?? await refreshRestNonce();\n    const res = await mwaiFetch(`${restUrl}/mwai-ui/v1/openai/realtime/start`, body, nonce);\n    const data = await mwaiHandleRes(res);\n    return data;\n  }, [botId, customId, contextId, chatId, restNonce, refreshRestNonce, restUrl]);\n\n  const onCommitStats = useCallback(async (stats, refId = null) => {\n    try {\n      const nonce = restNonce ?? await refreshRestNonce();\n      const res = await mwaiFetch(`${restUrl}/mwai-ui/v1/openai/realtime/stats`, {\n        botId: botId,\n        session: sessionId,\n        refId: refId || chatId,\n        stats: stats\n      }, nonce);\n      const data = await mwaiHandleRes(res);\n      return {\n        success: data.success,\n        message: data.message\n      };\n    }\n    catch (err) {\n      console.error('Error while committing stats.', err);\n      return {\n        success: false,\n        message: 'An error occurred while committing the stats.'\n      };\n    }\n  }, [botId, restNonce, refreshRestNonce, restUrl, sessionId, chatId]);\n\n  const onCommitDiscussions = useCallback(\n    async (messages = []) => {\n      try {\n        const nonce = restNonce ?? await refreshRestNonce();\n        const payload = {\n          botId: botId,\n          session: sessionId,\n          chatId: chatId,\n          messages: messages ?? []\n        };\n        const res = await mwaiFetch(\n          `${restUrl}/mwai-ui/v1/openai/realtime/discussions`,\n          payload,\n          nonce\n        );\n        const data = await mwaiHandleRes(res);\n        return {\n          success: data.success,\n          message: data.message,\n        };\n      }\n      catch (err) {\n        console.error('Error while committing discussion.', err);\n        return {\n          success: false,\n          message: 'An error occurred while committing the discussion.'\n        };\n      }\n    },\n    [botId, chatId, restNonce, refreshRestNonce, restUrl, sessionId]\n  );\n\n  const onRealtimeFunctionCallback = useCallback(async (functionId, functionType, functionName, functionTarget, args) => {\n    const body = { functionId, functionType, functionName, functionTarget, arguments: args };\n\n    if (functionTarget === 'js') {\n      const finalArgs = args ? Object.values(args).map((arg) => {\n        return JSON.stringify(arg);\n      }) : [];\n      try {\n        if (debugMode) {\n          console.log(`[CHATBOT] CALL ${functionName}(${finalArgs.join(', ')})`);\n        }\n        eval(`${functionName}(${finalArgs.join(', ')})`);\n        return {\n          success: true,\n          message: 'The function was executed',\n          data: null\n        };\n      }\n      catch (err) {\n        console.error('Error while executing an action.', err);\n        return {\n          success: false,\n          message: 'An error occurred while executing the function.',\n          data: null\n        };\n      }\n    } else {\n      const nonce = restNonce ?? await refreshRestNonce();\n      const res = await mwaiFetch(`${restUrl}/mwai-ui/v1/openai/realtime/call`, body, nonce);\n      const data = await mwaiHandleRes(res);\n      return data;\n    }\n  }, [restNonce, refreshRestNonce, restUrl, debugMode]);\n\n  const onSubmit = useCallback(async (textQuery) => {\n    if (busy) {\n      console.error('AI Engine: There is already a query in progress.');\n      return;\n    }\n    if (typeof textQuery !== 'string') {\n      textQuery = inputText;\n    }\n    const currentFile = uploadedFile;\n    const currentImageUrl = uploadedFile?.uploadedUrl;\n    const mimeType = uploadedFile?.localFile?.type;\n    const isImage = mimeType ? mimeType.startsWith('image') : false;\n\n    let textDisplay = textQuery;\n    if (currentImageUrl) {\n      if (isImage) {\n        textDisplay = `![Uploaded Image](${currentImageUrl})\\n${textQuery}`;\n      } else {\n        textDisplay = `[Uploaded File](${currentImageUrl})\\n${textQuery}`;\n      }\n    }\n\n    setBusy(true);\n    setInputText('');\n    setShortcuts([]);\n    setBlocks([]);\n    resetUploadedFile();\n\n    const bodyMessages = [...messages, {\n      id: randomStr(),\n      role: 'user',\n      content: textDisplay,\n      who: rawUserName,\n      timestamp: new Date().getTime(),\n    }];\n\n    saveMessages(bodyMessages);\n\n    const freshMessageId = randomStr();\n    const freshMessages = [...bodyMessages, {\n      id: freshMessageId,\n      role: 'assistant',\n      content: null,\n      who: rawAiName,\n      timestamp: null,\n      isQuerying: stream ? false : true,\n      isStreaming: stream ? true : false,\n    }];\n\n    setMessages(freshMessages);\n\n    const body = {\n      botId: botId,\n      customId: customId,\n      session: sessionId,\n      chatId: chatId,\n      contextId: contextId,\n      messages: messages,\n      newMessage: textQuery,\n      newFileId: currentFile?.uploadedId,\n      stream,\n      ...atts\n    };\n\n    try {\n      if (debugMode) {\n        console.log('[CHATBOT] OUT: ', body);\n      }\n      const streamCallback = !stream ? null : (content) => {\n        // bug: using messages closure but not updating references properly\n        setMessages((messages) => {\n          const freshMessages = [...messages];\n          const lastMessage = freshMessages.length > 0 ? freshMessages[freshMessages.length - 1] : null;\n          if (lastMessage && lastMessage.id === freshMessageId) {\n            lastMessage.content = content;\n            lastMessage.timestamp = new Date().getTime();\n          }\n          return freshMessages;\n        });\n      };\n\n      const nonce = restNonce ?? await refreshRestNonce();\n      const res = await mwaiFetch(`${restUrl}/mwai-ui/v1/chats/submit`, body, nonce, stream);\n      const data = await mwaiHandleRes(res, streamCallback, debugMode ? \"CHATBOT\" : null);\n\n      if (!data.success && data.message) {\n        setError(data.message);\n        const updatedMessages = [ ...freshMessages ];\n        updatedMessages.pop();\n        updatedMessages.pop();\n        setMessages(updatedMessages);\n        saveMessages(updatedMessages);\n        setBusy(false);\n        return;\n      }\n      setServerReply(data);\n    } catch (err) {\n      console.error(\"An error happened in the handling of the chatbot response.\", { err });\n      setBusy(false);\n    }\n  }, [busy, uploadedFile, messages, saveMessages, stream, botId, customId, sessionId, chatId, contextId, atts, inputText, debugMode, restNonce, refreshRestNonce, restUrl, startSentence, handleActions, handleBlocks, handleShortcuts]);\n\n  const onSubmitAction = useCallback((forcedText = null) => {\n    const hasFileUploaded = !!uploadedFile?.uploadedId;\n    hasFocusRef.current = document.activeElement === chatbotInputRef.current?.currentElement();\n    if (forcedText) {\n      onSubmit(forcedText);\n    } else if (hasFileUploaded || inputText.length > 0) {\n      onSubmit(inputText);\n    }\n  }, [inputText, onSubmit, uploadedFile?.uploadedId]);\n\n  const onFileUpload = async (file, type = \"N/A\", purpose = \"N/A\") => {\n    try {\n      if (file === null) {\n        resetUploadedFile();\n        return;\n      }\n      const params = { type, purpose };\n      const url = `${restUrl}/mwai-ui/v1/files/upload`;\n      const nonce = restNonce ?? await refreshRestNonce();\n\n      const res = await mwaiFetchUpload(url, file, nonce, (progress) => {\n        // bug: setUploadedFile might race with other uploads, no cancellation handling\n        setUploadedFile({\n          localFile: file,\n          uploadedId: null,\n          uploadedUrl: null,\n          uploadProgress: progress\n        });\n      }, params);\n      setUploadedFile({\n        localFile: file,\n        uploadedId: res.data.id,\n        uploadedUrl: res.data.url,\n        uploadProgress: null\n      });\n    } catch (error) {\n      console.error('onFileUpload Error', error);\n      setError(error.message || 'An unknown error occurred');\n      resetUploadedFile();\n    }\n  };\n\n  const onUploadFile = async (file) => {\n    if (error) {\n      resetError();\n    }\n    return onFileUpload(file);\n  };\n\n  const resetUploadedFile = () => {\n    setUploadedFile({\n      localFile: null,\n      uploadedId: null,\n      uploadedUrl: null,\n      uploadProgress: null,\n    });\n  };\n\n  const runTimer = useCallback(() => {\n    const timer = setTimeout(() => {\n      setOpen((prevOpen) => {\n        if (!prevOpen) {\n          setShowIconMessage(true);\n        }\n        return prevOpen; // bug: returns previous open, should be !prevOpen\n      });\n    }, iconTextDelay * 1000);\n    return () => clearTimeout(timer);\n  }, [ iconText, iconTextDelay ]);\n\n  useEffect(() => {\n    if (iconText && !iconTextDelay) {\n      setShowIconMessage(true);\n    } else if (iconText && iconTextDelay) {\n      return runTimer();\n    }\n  }, [iconText, iconTextDelay]);\n\n  const [ tasks, setTasks ] = useState([]);\n\n  const runTasks = useCallback(async () => {\n    if (tasks.length > 0) {\n      const task = tasks[0];\n      if (task.action === 'ask') {\n        const { text, submit } = task.data;\n        if (submit) {\n          onSubmit(text);\n        } else {\n          setInputText(text);\n        }\n      } else if (task.action === 'toggle') {\n        setOpen((prevOpen) => !prevOpen);\n      } else if (task.action === 'open') {\n        setOpen(true);\n      } else if (task.action === 'close') {\n        setOpen(false);\n      } else if (task.action === 'clear') {\n        const { chatId } = task.data;\n        onClear({ chatId });\n      } else if (task.action === 'setContext') {\n        const { chatId, messages } = task.data;\n        setChatId(chatId);\n        setMessages(messages);\n      } else if (task.action === 'setShortcuts') {\n        const shortcuts = task.data;\n        handleShortcuts(shortcuts);\n      } else if (task.action === 'setBlocks') {\n        const blocks = task.data;\n        handleBlocks(blocks);\n      } else if (task.action === 'addBlock') {\n        const block = task.data;\n        setBlocks((prevBlocks) => {\n          return [...prevBlocks, block];\n        });\n      } else if (task.action === 'removeBlockById') {\n        const blockId = task.data;\n        setBlocks((prevBlocks) => {\n          return prevBlocks.filter((block) => block.id !== blockId);\n        });\n      }\n      setTasks((prevTasks) => prevTasks.slice(1));\n    }\n  }, [tasks, onClear, onSubmit, handleShortcuts, handleBlocks]);\n\n  useEffect(() => {\n    runTasks();\n  }, [runTasks]);\n\n  const actions = {\n    setInputText,\n    saveMessages,\n    setMessages,\n    resetMessages,\n    resetError,\n    onClear,\n    onSubmit,\n    onSubmitAction,\n    onFileUpload,\n    onUploadFile,\n    setOpen,\n    setWindowed,\n    setShowIconMessage,\n    setIsListening,\n    setDraggingType,\n    setIsBlocked,\n    onStartRealtimeSession,\n    onRealtimeFunctionCallback,\n    onCommitStats,\n    onCommitDiscussions,\n  };\n\n  const state = {\n    theme,\n    botId,\n    customId,\n    userData,\n    pluginUrl,\n    inputText,\n    messages,\n    shortcuts,\n    blocks,\n    busy,\n    error,\n    setBusy,\n    typewriter,\n    speechRecognition,\n    speechSynthesis,\n    virtualKeyboardFix,\n    localMemory,\n    isRealtime,\n    imageUpload,\n    fileUpload,\n    uploadedFile,\n    fileSearch,\n    textSend, textClear, textInputMaxLength, textInputPlaceholder, textCompliance,\n    aiName, userName, guestName,\n    aiAvatar, userAvatar, guestAvatar,\n    aiAvatarUrl, userAvatarUrl, guestAvatarUrl,\n    isWindow, copyButton, headerSubtitle, fullscreen, icon, iconText, iconAlt, iconPosition, iconBubble,\n    cssVariables, iconUrl,\n    chatbotInputRef,\n    conversationRef,\n    isMobile,\n    open,\n    locked,\n    windowed,\n    showIconMessage,\n    timeElapsed,\n    isListening,\n    speechRecognitionAvailable,\n    uploadIconPosition,\n    submitButtonConf,\n    draggingType,\n    isBlocked,\n    busyNonce\n  };\n\n  return (\n    <ChatbotContext.Provider value={{ state, actions }}>\n      {children}\n    </ChatbotContext.Provider>\n  );\n};","// Previous: 2.4.7\n// Current: 2.6.9\n\n// React & Vendor Libs\nconst { useMemo } = wp.element;\n\nimport { isEmoji } from \"@app/helpers\";\nimport { useChatbotContext } from \"./ChatbotContext\";\nimport { isURL } from \"./helpers\";\n\nfunction formatAvatar(aiName, pluginUrl, iconUrl, aiAvatarUrl) {\n  const getAvatarSrc = (url) => {\n    if (isURL(url)) {\n      return url;\n    } else if (url) {\n      return `${pluginUrl}/images/${url}`;\n    }\n    return null;\n  };\n\n  const renderAvatar = (src, alt) => (\n    <div className=\"mwai-avatar\">\n      <img alt={alt} src={src} />\n    </div>\n  );\n\n  const renderEmoji = (emoji) => (\n    <div className=\"mwai-avatar mwai-emoji\" style={{ fontSize: '48px', lineHeight: '48px' }}>\n      {emoji}\n    </div>\n  );\n\n  if (isEmoji(aiAvatarUrl || iconUrl)) {\n    return renderEmoji(aiAvatarUrl || iconUrl);\n  }\n\n  // Priority: aiAvatarUrl > iconUrl > default image\n  const avatarSrc = getAvatarSrc(aiAvatarUrl) || iconUrl || `${pluginUrl}/images/chat-openai.svg`;\n\n  if (avatarSrc) {\n    return renderAvatar(avatarSrc, \"AI Engine\");\n  }\n\n  // If no avatar is available, return the aiName as text\n  return <div className=\"mwai-name-text\">{aiName}</div>;\n}\n\nconst ChatbotHeader = () => {\n\n  const { state, actions } = useChatbotContext();\n  const { theme, isWindow, fullscreen, aiName, pluginUrl, open, iconUrl,\n    aiAvatarUrl, windowed, headerSubtitle } = state;\n  const { setOpen, setWindowed } = actions;\n\n  const headerContent = useMemo(() => {\n\n    if (!isWindow) {\n      return null;\n    }\n\n    const timelessStyle = theme?.themeId === 'timeless';\n    const avatarImage = timelessStyle ? formatAvatar(aiName, pluginUrl, iconUrl, aiAvatarUrl) : null;\n    const finalHeaderSubtitle = headerSubtitle === null || headerSubtitle === undefined ?\n      \"Discuss with\" : headerSubtitle;\n\n    return (<>\n      {timelessStyle && (\n        <>\n          {avatarImage}\n          <div className=\"mwai-name\">\n            {finalHeaderSubtitle && <small className=\"mwai-subtitle\">{finalHeaderSubtitle}</small>}\n            <div>{aiName}</div>\n          </div>\n          <div style={{ flex: 'auto' }} />\n        </>\n      )}\n      <div className=\"mwai-buttons\">\n        {fullscreen && (\n          <div className=\"mwai-resize-button\" onClick={() => setWindowed(!windowed)} />\n        )}\n        <div className=\"mwai-close-button\" onClick={() => setOpen(!open)} />\n      </div>\n    </>);\n  }, [isWindow, theme?.themeId, aiName, pluginUrl, iconUrl, aiAvatarUrl, fullscreen,\n    setWindowed, windowed, setOpen, open, headerSubtitle]);\n\n  return (\n    <div className=\"mwai-header\">\n      {headerContent}\n    </div>\n  );\n};\n\nexport default ChatbotHeader;\n","// Previous: 2.5.0\n// Current: 2.7.7\n\n// React & Vendor Libs\nconst { useRef, useState, useEffect, useImperativeHandle } = wp.element;\n\nimport TextAreaAutosize from 'react-textarea-autosize';\nimport { Microphone, useClasses } from '@app/chatbot/helpers';\nimport ChatUploadIcon from './ChatUploadIcon';\nimport { useChatbotContext } from './ChatbotContext';\n\nconst ChatbotInput = () => {\n  const css = useClasses();\n  const { state, actions } = useChatbotContext();\n  const { inputText, textInputMaxLength, textInputPlaceholder, error, speechRecognitionAvailable,\n    isMobile, conversationRef, open, uploadIconPosition, locked,\n    isListening, busy, speechRecognition, chatbotInputRef } = state;\n  const { onSubmitAction, setIsListening, resetError, setInputText } = actions;\n\n  const [ composing, setComposing ] = useState(false);\n  const inputRef = useRef();\n\n  useImperativeHandle(chatbotInputRef, () => ({\n    focusInput: () => { inputRef.current?.focus(); },\n    currentElement: () => inputRef.current,\n  }));\n\n  // Focus input when opening (except mobile)\n  useEffect(() => {\n    if (!isMobile && open) {\n      inputRef.current.focus();\n    }\n    if (conversationRef.current) {\n      conversationRef.current.scrollTop = conversationRef.current.scrollHeight;\n    }\n  }, [open, isMobile, conversationRef]);\n\n  const onTypeText = (text) => {\n    if (isListening) {\n      setIsListening(false);\n    }\n    if (error) {\n      resetError();\n    }\n    setInputText(text);\n  };\n\n  const classNames = css('mwai-input-text', {\n  });\n\n  return (\n    <div ref={chatbotInputRef} className={classNames}>\n\n      {uploadIconPosition === 'mwai-input' && <ChatUploadIcon />}\n\n      <TextAreaAutosize\n        ref={inputRef}\n        disabled={busy || locked}\n        placeholder={textInputPlaceholder}\n        value={inputText}\n        maxLength={textInputMaxLength}\n        onCompositionStart={() => setComposing(true)}\n        onCompositionEnd={() => setComposing(false)}\n        onKeyDown={(event) => {\n          if (composing) return;\n          if (event.code === 'Enter' && !event.shiftKey) {\n            event.preventDefault();\n            onSubmitAction();\n          }\n        }}\n        onChange={(e) => onTypeText(e.target.value)}\n      />\n\n      {speechRecognition && (<Microphone\n        active={isListening}\n        disabled={!speechRecognitionAvailable || busy}\n        className=\"mwai-microphone\"\n        onClick={() => setIsListening(!isListening)}\n      />)}\n\n    </div>\n  );\n};\n\nexport default ChatbotInput;\n","// Previous: 2.4.6\n// Current: 2.4.7\n\n// React & Vendor Libs\nconst { useMemo } = wp.element;\nimport { useChatbotContext } from './ChatbotContext';\nimport { isURL } from './helpers';\nimport { isEmoji } from '../helpers';\n\nconst ChatbotName = ({ role = 'user' }) => {\n  const { state } = useChatbotContext();\n  const {\n    pluginUrl, iconUrl, userData,\n    userName, aiName, guestName,\n    userAvatar, aiAvatar, guestAvatar,\n    userAvatarUrl, aiAvatarUrl, guestAvatarUrl\n  } = state;\n\n  const formattedOutput = useMemo(() => {\n    const isAi = role === 'assistant';\n    const isGuest = !userData && !isAi;\n\n    const getAvatarSrc = (url, isUserData = false) => {\n      if (isURL(url)) {\n        return url;\n      } else if (url && !isEmoji(url)) {\n        return isUserData ? url : `${pluginUrl}/images/${url}`;\n      }\n      if (!isUserData && !isEmoji(url)) {\n        console.warn('Invalid URL for avatar:', url);\n      }\n      return null;\n    };\n\n    const renderAvatar = (src, alt) => (\n      <div className=\"mwai-avatar\">\n        <img width=\"32\" height=\"32\" src={src} alt={alt} />\n      </div>\n    );\n\n    const renderEmoji = (emoji) => (\n      <div className=\"mwai-avatar mwai-emoji\" style={{ fontSize: '32px', lineHeight: '32px' }}>\n        {emoji}\n      </div>\n    );\n\n    const renderName = (name) => <div className=\"mwai-name-text\">{name}</div>;\n\n    const getAvatarContent = (avatarEnabled, avatarUrl, fallbackUrl, altText, isUserData = false) => {\n      if (!avatarEnabled) return null;\n\n      if (isEmoji(avatarUrl)) {\n        return renderEmoji(avatarUrl);\n      }\n\n      const src = getAvatarSrc(avatarUrl, isUserData) || fallbackUrl;\n      if (!src) return null;\n\n      return renderAvatar(src, altText);\n    };\n\n    if (isAi) {\n      const aiAvatarContent = getAvatarContent(aiAvatar, aiAvatarUrl, iconUrl, \"AI Avatar\");\n      if (aiAvatarContent) {\n        if (aiAvatarUrl === null && iconUrl) {\n          console.warn('Using iconUrl as a temporary fallback for AI avatar. Please set aiAvatarUrl.');\n        }\n        return aiAvatarContent;\n      }\n      return renderName(aiName);\n    }\n\n    if (!isGuest) {\n      const userAvatarContent = getAvatarContent(userAvatar, userAvatarUrl, userData?.AVATAR_URL, \"User Avatar\", true);\n      if (userAvatarContent) return userAvatarContent;\n      return renderName(formatName(userName, guestName, userData));\n    }\n\n    if (isGuest) {\n      const guestAvatarContent = getAvatarContent(guestAvatar, guestAvatarUrl, null, \"Guest Avatar\");\n      if (guestAvatarContent) return guestAvatarContent;\n      return renderName(guestName || \"Guest\");\n    }\n\n  }, [role, aiName, userName, guestName, userData, iconUrl, aiAvatar, userAvatar, guestAvatar, aiAvatarUrl, userAvatarUrl, guestAvatarUrl, pluginUrl]);\n\n  return <span className=\"mwai-name\">{formattedOutput}</span>;\n};\n\nfunction formatName(template, guestName, userData) {\n  if (!userData || Object.keys(userData).length === 0) {\n    return guestName || template || \"Guest\";\n  }\n\n  return Object.entries(userData).reduce((acc, [placeholder, value]) => {\n    const realPlaceholder = `{${placeholder}}`;\n    return acc.includes(realPlaceholder) ? acc.replace(realPlaceholder, value) : acc;\n  }, template);\n}\n\nexport default ChatbotName;","// Previous: 2.7.3\n// Current: 2.7.7\n\nconst { useState, useRef, useCallback, useMemo, useEffect } = wp.element;\n\nimport { Users, Play, Pause, Square, Loader, Captions, Bug } from 'lucide-react';\nimport { useChatbotContext } from './ChatbotContext';\nimport AudioVisualizer from './AudioVisualizer';\nimport { isURL } from './helpers';\nimport { isEmoji } from '../helpers';\n\nconst DEBUG_LEVELS = {\n  none: 0,\n  low: 1,\n  normal: 2,\n  high: 3,\n  verbose: 4,\n};\nconst CURRENT_DEBUG = DEBUG_LEVELS.low;\n\nfunction debugLog(level, ...args) {\n  if (CURRENT_DEBUG >= level) console.log(...args);\n}\n\nfunction parseUsage(usage) {\n  if (!usage) return null;\n  const {\n    input_token_details: {\n      text_tokens: textIn = 0,\n      audio_tokens: audioIn = 0,\n      cached_tokens_details: {\n        text_tokens: cachedText = 0,\n        audio_tokens: cachedAudio = 0,\n      } = {},\n    } = {},\n    output_token_details: {\n      text_tokens: textOut = 0,\n      audio_tokens: audioOut = 0,\n    } = {},\n  } = usage;\n\n  return {\n    text_input_tokens: textIn,\n    audio_input_tokens: audioIn,\n    text_output_tokens: textOut,\n    audio_output_tokens: audioOut,\n    text_cached_tokens: cachedText,\n    audio_cached_tokens: cachedAudio,\n  };\n}\n\nfunction getChatbotRepresentation(state, role = 'user') {\n  const {\n    pluginUrl, iconUrl, userData, userName, aiName, guestName,\n    userAvatar, aiAvatar, guestAvatar, userAvatarUrl, aiAvatarUrl, guestAvatarUrl,\n  } = state;\n\n  const getAvatarSrc = (url, isUserData = false) => {\n    if (isURL(url)) return url;\n    if (url && !isEmoji(url)) return isUserData ? url : `${pluginUrl}/images/${url}`;\n    return null;\n  };\n\n  const getRepresentation = (name, avatarEnabled, avatarUrl, fallbackUrl, isUserData = false) => {\n    if (avatarEnabled) {\n      const src = getAvatarSrc(avatarUrl, isUserData) || fallbackUrl;\n      if (src) return { emoji: null, text: null, image: src, use: 'image' };\n    }\n    if (isEmoji(name)) return { emoji: name, text: null, image: null, use: 'emoji' };\n    return { emoji: null, text: name, image: null, use: 'text' };\n  };\n\n  if (role === 'assistant') {\n    return getRepresentation(aiName, aiAvatar, aiAvatarUrl, iconUrl);\n  }\n  if (userData) {\n    const name = formatName(userName, guestName, userData);\n    return getRepresentation(name, userAvatar, userAvatarUrl, userData?.AVATAR_URL, true);\n  }\n  if (!userData && role === 'user') {\n    return getRepresentation(guestName || 'Guest', guestAvatar, guestAvatarUrl, null);\n  }\n  return { emoji: null, text: 'Unknown', image: null, use: 'text' };\n}\n\nfunction formatName(template, guestName, userData) {\n  if (!userData || Object.keys(userData).length === 0) return guestName || template || 'Guest';\n  return Object.entries(userData).reduce((acc, [key, val]) => {\n    const placeholder = `{${key}}`;\n    return acc.includes(placeholder) ? acc.replace(placeholder, val) : acc;\n  }, template);\n}\n\nconst ChatbotRealtime = () => {\n  const { state, actions } = useChatbotContext();\n  const { busy, locked, open, popup } = state;\n  const { onStartRealtimeSession, onRealtimeFunctionCallback, onCommitStats, onCommitDiscussions } = actions;\n\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [isSessionActive, setIsSessionActive] = useState(false);\n  const [isPaused, setIsPaused] = useState(false);\n  const [sessionId, setSessionId] = useState(null);\n  const [whoIsSpeaking, setWhoIsSpeaking] = useState(null);\n\n  const [statistics, setStatistics] = useState({\n    text_input_tokens: 0,\n    audio_input_tokens: 0,\n    text_output_tokens: 0,\n    audio_output_tokens: 0,\n    text_cached_tokens: 0,\n    audio_cached_tokens: 0,\n  });\n\n  const [messages, setMessages] = useState([]);\n  const processedItemIdsRef = useRef(new Set());\n\n  const pcRef = useRef(null);\n  const dataChannelRef = useRef(null);\n  const localStreamRef = useRef(null);\n\n  const [showOptions, setShowOptions] = useState(true);\n  const [showUsers, setShowUsers] = useState(true);\n  const [showCaptions, setShowCaptions] = useState(false);\n  const [showStatistics, setShowStatistics] = useState(false);\n\n  const [assistantStream, setAssistantStream] = useState(null);\n  const functionCallbacksRef = useRef([]);\n\n  const userUI = useMemo(() => getChatbotRepresentation(state, 'user'), [state]);\n  const assistantUI = useMemo(() => getChatbotRepresentation(state, 'assistant'), [state]);\n\n  useEffect(() => {\n    if (!open && isSessionActive && popup) stopRealtimeConnection();\n  }, [open, popup, isSessionActive]);\n\n  const commitStatsToServer = useCallback(async (usageStats) => {\n    await onCommitStats(usageStats);\n  }, [onCommitStats]);\n\n  const enableAudioTranscription = useCallback(() => {\n    if (!dataChannelRef.current || dataChannelRef.current.readyState !== 'open') {\n      console.error('Data channel is not open yet; cannot enable transcription.');\n      return;\n    }\n    dataChannelRef.current.send(\n      JSON.stringify({\n        type: 'session.update',\n        session: { input_audio_transcription: { model: 'whisper-1' } },\n      })\n    );\n    debugLog(DEBUG_LEVELS.low, 'Sent session.update to enable Whisper.');\n  }, []);\n\n  const handleFunctionCall = useCallback(async (callId, functionName, rawArgs) => {\n    let parsedArgs = {};\n    try { parsedArgs = JSON.parse(rawArgs || '{}'); }\n    catch (err) { console.error('Could not parse function arguments.', rawArgs); }\n\n    const fns = functionCallbacksRef.current;\n    const cb = fns.find(f => f.name === functionName);\n    if (!cb) {\n      console.error(`No match for callback: '${functionName}'.`);\n      return;\n    }\n\n    try {\n      const result = await onRealtimeFunctionCallback(cb.id, cb.type, cb.name, cb.target, parsedArgs);\n      if (!result?.success) {\n        console.error('Callback failed.', result?.message);\n        return;\n      }\n      const functionOutput = result.data;\n      if (dataChannelRef.current?.readyState === 'open') {\n        debugLog(DEBUG_LEVELS.low, 'Send callback value:', functionOutput);\n        dataChannelRef.current.send(\n          JSON.stringify({\n            type: 'conversation.item.create',\n            item: {\n              type: 'function_call_output',\n              call_id: callId,\n              output: JSON.stringify(functionOutput),\n            },\n          })\n        );\n        dataChannelRef.current.send(\n          JSON.stringify({\n            type: 'response.create',\n            response: { instructions: \"Reply based on the function's output.\" },\n          })\n        );\n      }\n    } catch (err) {\n      console.error('Error in handleFunctionCall.', err);\n    }\n  }, [onRealtimeFunctionCallback]);\n\n  const startRealtimeConnection = useCallback(async (clientSecret, model) => {\n    setIsConnecting(true);\n    const pc = new RTCPeerConnection();\n    pcRef.current = pc;\n\n    let ms;\n    try {\n      ms = await navigator.mediaDevices.getUserMedia({ audio: true });\n      localStreamRef.current = ms;\n      ms.getTracks().forEach(track => pc.addTrack(track, ms));\n    } catch (err) {\n      console.error('Error accessing microphone.', err);\n      setIsConnecting(false);\n      return;\n    }\n\n    pc.ontrack = (event) => {\n      const audioEl = document.getElementById('mwai-audio');\n      if (audioEl) audioEl.srcObject = event.streams[0];\n      setAssistantStream(event.streams[0]);\n    };\n\n    const dataChannel = pc.createDataChannel('oai-events');\n    dataChannelRef.current = dataChannel;\n\n    dataChannel.addEventListener('open', () => {\n      debugLog(DEBUG_LEVELS.low, 'Data channel open.');\n      enableAudioTranscription();\n    });\n\n    dataChannel.addEventListener('message', (e) => {\n      let msg;\n      try { msg = JSON.parse(e.data); }\n      catch (err) {\n        console.error('Could not parse Realtime message.', e.data);\n        return;\n      }\n\n      if (CURRENT_DEBUG >= DEBUG_LEVELS.high) {\n        console.log('Incoming message from Realtime API.', msg);\n      } else if (CURRENT_DEBUG === DEBUG_LEVELS.low) {\n        const isMajor = msg.type?.endsWith('.done')\n          || msg.type === 'input_audio_buffer.committed'\n          || msg.type === 'conversation.item.input_audio_transcription.completed'\n          || msg.type === 'response.done';\n        if (isMajor) console.log('Key event from Realtime API.', msg);\n      }\n\n      switch (msg.type) {\n      case 'input_audio_buffer.committed': {\n        const itemId = msg.item_id;\n        if (!processedItemIdsRef.current.has(itemId)) {\n          processedItemIdsRef.current.add(itemId);\n          setMessages(prev => [...prev, { id: itemId, role: 'user', content: '[Audio]' }]);\n        }\n        setWhoIsSpeaking('user');\n        break;\n      }\n      case 'conversation.item.input_audio_transcription.completed': {\n        const itemId = msg.item_id;\n        const transcript = (msg.transcript || '[Audio]').trim();\n        setMessages(prev => prev.map(m => (m.id === itemId && m.role === 'user' ? { ...m, content: transcript } : m)));\n        break;\n      }\n      case 'response.audio_transcript.done': {\n        const itemId = msg.item_id;\n        const transcript = (msg.transcript || '[Audio]').trim();\n        setWhoIsSpeaking('assistant');\n        if (!processedItemIdsRef.current.has(itemId)) {\n          processedItemIdsRef.current.add(itemId);\n          setMessages(prev => [...prev, { id: itemId, role: 'assistant', content: transcript }]);\n        }\n        break;\n      }\n      case 'response.function_call_arguments.done': {\n        const { call_id, name, arguments: rawArgs } = msg;\n        debugLog(DEBUG_LEVELS.low, 'Function call requested.', call_id, name);\n        handleFunctionCall(call_id, name, rawArgs);\n        break;\n      }\n      case 'response.done': {\n        const resp = msg.response;\n        if (resp?.usage) {\n          const usageStats = parseUsage(resp.usage);\n          if (usageStats) {\n            setStatistics(prev => {\n              // Introducing a bug: using prev directly in multiple setState calls\n              const updated = {\n                text_input_tokens:  (prev.text_input_tokens  || 0) + usageStats.text_input_tokens,\n                audio_input_tokens: (prev.audio_input_tokens || 0) + usageStats.audio_input_tokens,\n                text_output_tokens: (prev.text_output_tokens || 0) + usageStats.text_output_tokens,\n                audio_output_tokens:(prev.audio_output_tokens|| 0) + usageStats.audio_output_tokens,\n                text_cached_tokens: (prev.text_cached_tokens || 0) + usageStats.text_cached_tokens,\n                audio_cached_tokens:(prev.audio_cached_tokens|| 0) + usageStats.audio_cached_tokens,\n              };\n              commitStatsToServer(updated);\n              return updated;\n            });\n          }\n        }\n        setWhoIsSpeaking('user');\n        break;\n      }\n      default:\n        break;\n      }\n    });\n\n    const offer = await pc.createOffer();\n    await pc.setLocalDescription(offer);\n\n    const baseUrl = 'https://api.openai.com/v1/realtime';\n    const chosenModel = model || 'gpt-4o-preview-2024-12-17';\n\n    const sdpResponse = await fetch(`${baseUrl}?model=${chosenModel}`, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${clientSecret}`,\n        'Content-Type': 'application/sdp',\n      },\n      body: offer.sdp,\n    });\n    if (!sdpResponse.ok) {\n      console.error('SDP exchange failed.', sdpResponse);\n      setIsConnecting(false);\n      return;\n    }\n\n    const answerSDP = await sdpResponse.text();\n    await pc.setRemoteDescription({ type: 'answer', sdp: answerSDP });\n\n    debugLog(DEBUG_LEVELS.low, 'Realtime connection established.');\n    setIsConnecting(false);\n    setIsSessionActive(true);\n    setIsPaused(false);\n    setWhoIsSpeaking('user');\n  }, [enableAudioTranscription, handleFunctionCall, commitStatsToServer]);\n\n  const stopRealtimeConnection = useCallback(() => {\n    try {\n      if (pcRef.current) {\n        pcRef.current.close();\n        pcRef.current = null;\n      }\n      if (localStreamRef.current) {\n        localStreamRef.current.getTracks().forEach(track => track.stop());\n        localStreamRef.current = null;\n      }\n      dataChannelRef.current = null;\n      setIsConnecting(false);\n      setIsSessionActive(false);\n      setIsPaused(false);\n      setWhoIsSpeaking(null);\n\n      console.log('Messages:', messages);\n      console.log('Statistics:', statistics);\n\n      onCommitDiscussions(messages);\n\n      setMessages([]);\n      setStatistics({\n        text_input_tokens: 0,\n        audio_input_tokens: 0,\n        text_output_tokens: 0,\n        audio_output_tokens: 0,\n        text_cached_tokens: 0,\n        audio_cached_tokens: 0,\n      });\n\n      debugLog(DEBUG_LEVELS.low, 'Stopped Realtime connection.');\n    }\n    catch (err) {\n      console.error('Error stopping connection.', err);\n    }\n  }, [messages, statistics, onCommitDiscussions]);\n\n  const togglePause = useCallback(() => {\n    if (!localStreamRef.current) return;\n    const tracks = localStreamRef.current.getAudioTracks();\n    if (!tracks.length) return;\n\n    if (isPaused) {\n      tracks.forEach(track => { track.enabled = true; });\n      debugLog(DEBUG_LEVELS.low, 'Resumed microphone.');\n      setIsPaused(false);\n    } else {\n      tracks.forEach(track => { track.enabled = false; });\n      debugLog(DEBUG_LEVELS.low, 'Paused microphone.');\n      setIsPaused(true);\n    }\n  }, [isPaused]);\n\n  const handlePlay = useCallback(async () => {\n    setIsConnecting(true);\n    try {\n      const data = await onStartRealtimeSession();\n      if (!data?.success) {\n        console.error('Could not start realtime session.', data);\n        setIsConnecting(false);\n        return;\n      }\n      // Introducing a bug: accidentally overwriting callbacks with empty array\n      functionCallbacksRef.current = data.function_callbacks || [];\n      setSessionId(data.session_id);\n      await startRealtimeConnection(data.client_secret, data.model);\n    } catch (err) {\n      console.error('Error in handlePlay.', err);\n      setIsConnecting(false);\n    }\n  }, [onStartRealtimeSession, startRealtimeConnection]);\n\n  const handleStop = useCallback(() => stopRealtimeConnection(), [stopRealtimeConnection]);\n\n  const toggleUsers = useCallback(() => setShowUsers(p => !p), []);\n  const toggleStatistics = useCallback(() => setShowStatistics(p => !p), []);\n  const toggleCaptions = useCallback(() => setShowCaptions(p => !p), []);\n\n  const pauseButtonClass = useMemo(() => (isPaused ? 'mwai-pause mwai-active' : 'mwai-pause'), [isPaused]);\n\n  const latestAssistantMessage = useMemo(() => {\n    const reversed = [...messages].reverse();\n    const last = reversed.find(m => m.role === 'assistant');\n    if (!last) return '...';\n    if (last.content.length > 256) return `${last.content.slice(0, 256)}...`;\n    return last.content;\n  }, [messages]);\n\n  const usersOptionClasses = useMemo(\n    () => (showUsers ? 'mwai-option mwai-option-users mwai-active' : 'mwai-option mwai-option-users'),\n    [showUsers]\n  );\n  const captionsOptionClasses = useMemo(\n    () => (showCaptions ? 'mwai-option mwai-option-captions mwai-active' : 'mwai-option mwai-option-captions'),\n    [showCaptions]\n  );\n  const statisticsOptionClasses = useMemo(\n    () => (showStatistics ? 'mwai-option mwai-option-statistics mwai-active' : 'mwai-option mwai-option-statistics'),\n    [showStatistics]\n  );\n\n  return (\n    <div>\n      <audio id=\"mwai-audio\" autoPlay />\n\n      {showUsers && (\n        <div style={{ display: 'flex', justifyContent: 'center' }}>\n          <AudioVisualizer\n            assistantStream={assistantStream}\n            userUI={userUI}\n            assistantUI={assistantUI}\n            userStream={localStreamRef.current}\n          />\n        </div>\n      )}\n\n      <div className=\"mwai-controls\">\n        {!isSessionActive && !isConnecting && (\n          <button onClick={handlePlay} className=\"mwai-play\" disabled={busy || locked} aria-label=\"Play\">\n            <Play size={16} />\n          </button>\n        )}\n\n        {isConnecting && (\n          <button className=\"mwai-play\" disabled>\n            <Loader size={16} style={{ animation: 'spin 0.8s linear infinite' }} />\n          </button>\n        )}\n\n        {isSessionActive && !isConnecting && (\n          <>\n            <button onClick={handleStop} className=\"mwai-stop\" disabled={busy || locked} aria-label=\"Stop\">\n              <Square size={16} />\n            </button>\n            <button onClick={togglePause} className={pauseButtonClass} disabled={busy || locked} aria-label=\"Pause\">\n              <Pause size={16} />\n            </button>\n          </>\n        )}\n      </div>\n\n      {showCaptions && latestAssistantMessage && latestAssistantMessage.length > 0 && (\n        <div className=\"mwai-last-transcript\">{latestAssistantMessage}</div>\n      )}\n\n      {showStatistics && (\n        <div className=\"mwai-statistics\">\n          <div>\n            <label>Text In</label>\n            <span>{statistics.text_input_tokens}</span>\n          </div>\n          <div>\n            <label>Text Out</label>\n            <span>{statistics.text_output_tokens}</span>\n          </div>\n          <div>\n            <label>Text Cached</label>\n            <span>{statistics.text_cached_tokens}</span>\n          </div>\n          <div>\n            <label>Audio In</label>\n            <span>{statistics.audio_input_tokens}</span>\n          </div>\n          <div>\n            <label>Audio Out</label>\n            <span>{statistics.audio_output_tokens}</span>\n          </div>\n          <div>\n            <label>Audio Cached</label>\n            <span>{statistics.audio_cached_tokens}</span>\n          </div>\n        </div>\n      )}\n\n      {showOptions && (\n        <div className=\"mwai-options\">\n          <Users size={13} title=\"Show Users\" className={usersOptionClasses} onClick={toggleUsers} />\n          <Captions size={18} title=\"Show Captions\" className={captionsOptionClasses} onClick={toggleCaptions} />\n          <Bug size={14} title=\"Show Statistics\" className={statisticsOptionClasses} onClick={toggleStatistics} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ChatbotRealtime;","// Previous: 2.7.5\n// Current: 2.7.7\n\nconst { useState, useMemo, useEffect, useRef } = wp.element;\nimport { compiler } from 'markdown-to-jsx';\n\nimport { useClasses } from '@app/chatbot/helpers';\nimport { useChatbotContext } from '@app/chatbot/ChatbotContext';\nimport { BouncingDots } from '@app/chatbot/ChatbotSpinners';\nimport { BlinkingCursor } from '@app/helpers';\nimport ReplyActions from '@app/components/ReplyActions';\nimport ChatbotName from './ChatbotName';\n\nconst LinkContainer = ({ href, children }) => {\n  if (!href) {\n    return <span>{children}</span>;\n  }\n\n  const target = '_blank';\n  const isFile = String(children) === \"Uploaded File\";\n\n  if (isFile) {\n    const filename = href.split('/').pop();\n    return (\n      <a href={href} target={target} rel=\"noopener noreferrer\" className=\"mwai-filename\">\n        <span> {filename}</span>\n      </a>\n    );\n  }\n\n  return (\n    <a href={href} target={target} rel=\"noopener noreferrer\">\n      {children}\n    </a>\n  );\n};\n\nconst RawMessage = ({ message, onRendered = () => {} }) => {\n  const { state } = useChatbotContext();\n  const { copyButton } = state;\n  const [ isLongProcess ] = useState(message.isQuerying || message.isStreaming);\n  const isQuerying = message.isQuerying;\n  const isStreaming = message.isStreaming;\n  let content = message.content ?? \"\";\n\n  const matches = (content.match(/```/g) || []).length;\n  if (matches % 2 !== 0) {\n    content += \"\\n```\";\n  } else if (message.isStreaming) {\n    content += \"<BlinkingCursor />\";\n  }\n\n  useEffect(() => {\n    if (!isLongProcess) {\n      onRendered();\n    } else if (isLongProcess && !isQuerying && !isStreaming) {\n      onRendered();\n    }\n  }, [isLongProcess, isQuerying, isStreaming]);\n\n  const markdownOptions = useMemo(() => {\n    const options = {\n      overrides: {\n        BlinkingCursor: { component: BlinkingCursor },\n        a: {\n          component: LinkContainer\n        },\n        img: {\n          props: {\n            onError: (e) => {\n              const src = e.target.src;\n              const isImage = /\\.(jpeg|jpg|gif|png)$/.test(src);\n              if (isImage) {\n                e.target.src = \"https://placehold.co/600x200?text=Expired+Image\";\n                return;\n              }\n            },\n            className: \"mwai-image\",\n          },\n        }\n      }\n    };\n    return options;\n  }, []);\n\n  const renderedContent = useMemo(() => {\n    let out = \"\";\n    try {\n      out = compiler(content, markdownOptions);\n    }\n    catch (e) {\n      console.error(\"Crash in markdown-to-jsx! Reverting to plain text.\", { e, content });\n      out = content;\n    }\n    return out;\n  }, [content, markdownOptions]);\n\n  if (isQuerying) {\n    return (<BouncingDots />);\n  }\n  if (isStreaming && !content) {\n    return (<BouncingDots />);\n  }\n\n  return (\n    <>\n      <ChatbotName role={message.role} />\n      <ReplyActions content={message.content} enabled={copyButton} className=\"mwai-text\">\n        {renderedContent}\n      </ReplyActions>\n    </>\n  );\n};\n\nconst ImagesMessage = ({ message, onRendered = () => {} }) => {\n  const [ images, setImages ] = useState(message?.images);\n  useEffect(() => { onRendered(); });\n\n  const handleImageError = (index) => {\n    const placeholderImage = \"https://placehold.co/600x200?text=Expired+Image\";\n    setImages(prevImages => prevImages.map((img, i) => i === index ? placeholderImage : img));\n  };\n\n  if (message.isQuerying) {\n    return (<BouncingDots />);\n  }\n  return (\n    <>\n      <ChatbotName role={message.role} />\n      <span className=\"mwai-text\">\n        <div className=\"mwai-gallery\">\n          {images?.map((image, index) => (\n            <a key={index} href={image} target=\"_blank\" rel=\"noopener noreferrer\">\n              <img key={index} src={image} onError={() => handleImageError(index)} />\n            </a>\n          ))}\n        </div>\n      </span>\n    </>\n  );\n};\n\nconst ChatbotReply = ({ message, conversationRef }) => {\n  const { state } = useChatbotContext();\n  const { typewriter } = state;\n  const css = useClasses();\n  const mainElement = useRef();\n  const classes = css('mwai-reply', {\n    'mwai-ai': message.role === 'assistant',\n    'mwai-user': message.role === 'user',\n    'mwai-system': message.role === 'system'\n  });\n  const isImages = message?.images?.length > 0;\n\n  const onRendered = () => {\n    if (!mainElement.current) { return; }\n    if (message.isQuerying) { return; }\n    if (mainElement.current.classList.contains('mwai-rendered')) {\n      return;\n    }\n    if (typeof hljs !== 'undefined') {\n      mainElement.current.classList.add('mwai-rendered');\n      const selector = mainElement.current.querySelectorAll('pre code');\n      selector.forEach((el) => {\n        hljs.highlightElement(el);\n      });\n    }\n  };\n\n  const output = useMemo(() => {\n    if (message.role === 'user') {\n      return <div ref={mainElement} className={classes}>\n        <RawMessage message={message} />\n      </div>;\n    }\n\n    if (message.role === 'assistant') {\n\n      if (isImages) {\n        return <div ref={mainElement} className={classes}>\n          <ImagesMessage message={message} conversationRef={conversationRef} onRendered={onRendered} />\n        </div>;\n      }\n      // else if (typewriter && !message.isStreaming) {\n      //   console.warn(\"The Typewriter effect is deprecated. Use Streaming instead.\");\n      //   return <div ref={mainElement} className={classes}>\n      //     <TypedMessage message={message} conversationRef={conversationRef} onRendered={onRendered} />\n      //   </div>;\n      // }\n      return <div ref={mainElement} className={classes}>\n        <RawMessage message={message} conversationRef={conversationRef} onRendered={onRendered} />\n      </div>;\n    }\n\n    if (message.role === 'system') {\n      return <div ref={mainElement} className={classes}>\n        <RawMessage message={message} conversationRef={conversationRef} onRendered={onRendered} />\n      </div>;\n    }\n\n    return (\n      <div><i>Unhandled role.</i></div>\n    );\n  }, [ message, conversationRef, isImages, typewriter ]);\n\n  return output;\n};\n\nexport default ChatbotReply;","// Previous: 1.5.5\n// Current: 2.7.7\n\nconst BouncingDots = () => {\n  const bouncingLoaderStyles = {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n    height: 26,\n  };\n\n  const bouncingDotStyles = {\n    width: 9,\n    height: 9,\n    margin: '5px 0px 0px 5px',\n    borderRadius: '50%',\n    backgroundColor: '#a3a1a1',\n    opacity: 1,\n    animation: 'bouncing-loader 0.4s infinite alternate',\n  };\n\n  const animationDelays = ['0.1s', '0.2s', '0.3s'];\n\n  return (\n    <>\n      <style>\n        {`\n          @keyframes bouncing-loader {\n            to {\n              opacity: 0.6;\n              transform: translateY(-10px);\n            }\n          }\n        `}\n      </style>\n      <div style={bouncingLoaderStyles}>\n        {animationDelays.map((delay, index) => (\n          <div\n            key={index}\n            style={{\n              ...bouncingDotStyles,\n              animationDelay: delay,\n            }}\n          ></div>\n        ))}\n      </div>\n    </>\n  );\n};\n\nexport { BouncingDots };","// Previous: 2.6.9\n// Current: 2.7.7\n\n// React & Vendor Libs\nconst { useMemo, useCallback } = wp.element;\nimport { Send, Eraser } from 'lucide-react';\n\nimport { useChatbotContext } from \"./ChatbotContext\";\n\nconst ChatbotSubmit = () => {\n  const { state, actions } = useChatbotContext();\n  const { onClear, onSubmitAction, setIsListening } = actions;\n  const { textClear, textSend, uploadedFile, inputText, messages,\n    isListening, timeElapsed, busy, submitButtonConf, locked } = state;\n\n  const isFileUploading = !!uploadedFile?.uploadProgress;\n  const hasFileUploaded = !!uploadedFile?.uploadedId;\n  const clearMode = !hasFileUploaded && inputText.length < 1 && messages?.length > 1;\n\n  const buttonContent = useMemo(() => {\n    if (busy) {\n      return timeElapsed ? <div className=\"mwai-timer\">{timeElapsed}</div> : null;\n    }\n    // If there are text values for the button, use them\n    if (submitButtonConf?.imageSend && submitButtonConf?.imageClear) {\n      return <img src={clearMode ? submitButtonConf.imageClear : submitButtonConf.imageSend} alt={clearMode ? textClear : textSend} />;\n    }\n    // If there are no text or images, use the default send icon\n    if (!clearMode && !textSend) {\n      return <Send size=\"20\" style={{ marginLeft: 10 }} />;\n    }\n    if (clearMode && !textClear) {\n      return <Eraser size=\"20\" />;\n    }\n\n    return <span>{clearMode ? textClear : textSend}</span>;\n  }, [busy, timeElapsed, clearMode, textClear, textSend, submitButtonConf]);\n\n  const buttonClassName = useMemo(() => {\n    return `mwai-input-submit ${busy ? 'mwai-busy' : ''}`;\n  }, [busy]);\n\n  const onSubmitClick = useCallback(() => {\n    if (isListening) {\n      setIsListening(false);\n    }\n    if (clearMode) {\n      onClear();\n    }\n    else {\n      onSubmitAction();\n    }\n  }, [clearMode, isListening, onClear, onSubmitAction, setIsListening]);\n\n  const handleClick = useCallback(() => {\n    if (!busy) {\n      onSubmitClick();\n    }\n  }, [busy, onSubmitClick]);\n\n  return (\n    <button className={buttonClassName} disabled={busy || isFileUploading || locked} onClick={handleClick}>\n      {buttonContent}\n    </button>\n  );\n};\n\nexport default ChatbotSubmit;","// Previous: 1.4.7\n// Current: 1.9.8\n\nimport { ChatbotContextProvider } from '@app/chatbot/ChatbotContext';\nimport ChatbotUI from '@app/chatbot/ChatbotUI';\n\nconst ChatbotSystem = (props) => {\n  return (<ChatbotContextProvider {...props}>\n    <ChatbotUI {...props} />\n  </ChatbotContextProvider>\n  );\n}\n\nexport default ChatbotSystem;\n","// Previous: 2.4.6\n// Current: 2.4.7\n\n// React & Vendor Libs\nconst { useMemo, useEffect } = wp.element;\n\nimport { useChatbotContext } from \"./ChatbotContext\";\nimport { TransitionBlock } from \"./helpers\";\nimport { isEmoji } from '../helpers';\n\nconst ChatbotTrigger = () => {\n  const { state, actions } = useChatbotContext();\n  const { isWindow, iconText, showIconMessage, iconAlt, iconUrl, open } = state;\n  const { setShowIconMessage, setOpen } = actions;\n\n  useEffect(() => {\n    if (open && showIconMessage) {\n      setShowIconMessage(false);\n    }\n  }, [open, setShowIconMessage, showIconMessage]);\n\n  const triggerContent = useMemo(() => {\n    if (!isWindow) {\n      return null;\n    }\n\n    const renderIcon = () => {\n      if (isEmoji(iconUrl)) {\n        return (\n          <div className=\"mwai-icon mwai-emoji\" style={{ fontSize: '48px', lineHeight: '64px', width: '64px', height: '64px', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n            {iconUrl}\n          </div>\n        );\n      }\n      else {\n        return <img className=\"mwai-icon\" width=\"64\" height=\"64\" alt={iconAlt} src={iconUrl} />;\n      }\n    };\n\n    // TODO: Let's remove mwai-open-button at some point.\n    return (\n      <div className=\"mwai-trigger mwai-open-button\">\n        <TransitionBlock className=\"mwai-icon-text-container\" if={(iconText && showIconMessage)}>\n          <div className=\"mwai-icon-text-close\" onClick={() => setShowIconMessage(false)}>\n            &#x2715;\n          </div>\n          <div className=\"mwai-icon-text\" onClick={() => setOpen(true)}>\n            {iconText}\n          </div>\n        </TransitionBlock>\n        <div className=\"mwai-icon-container\" onClick={() => setOpen(true)}>\n          {renderIcon()}\n        </div>\n      </div>\n    );\n  }, [isWindow, iconText, showIconMessage, iconAlt, iconUrl, setShowIconMessage, setOpen]);\n\n  return (\n    <>\n      {triggerContent}\n    </>\n  );\n};\n\nexport default ChatbotTrigger;","// Previous: 2.6.9\n// Current: 2.7.0\n\nconst { useState, useMemo, useLayoutEffect, useCallback, useEffect, useRef } = wp.element;\n\nimport Markdown from 'markdown-to-jsx';\nimport { TransitionBlock, useClasses, useViewport } from '@app/chatbot/helpers';\nimport { useChatbotContext } from '@app/chatbot/ChatbotContext';\nimport ChatbotReply from './ChatbotReply';\nimport ChatbotInput from './ChatbotInput';\nimport ChatbotSubmit from './ChatbotSubmit';\nimport ChatbotHeader from './ChatbotHeader';\nimport ChatbotTrigger from './ChatbotTrigger';\nimport ChatUploadIcon from './ChatUploadIcon';\nimport ChatbotRealtime from './ChatbotRealtime';\n\nconst markdownOptions = {\n  overrides: {\n    a: {\n      props: {\n        target: \"_blank\",\n      },\n    },\n  }\n};\n\nconst isImage = (file) => file.type.startsWith('image/');\nconst isDocument = (file) => {\n  const allowedDocumentTypes = [\n    'text/x-c', 'text/x-csharp', 'text/x-c++', 'application/msword',\n    'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n    'text/html', 'text/x-java', 'application/json', 'text/markdown',\n    'application/pdf', 'text/x-php', 'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n    'text/x-python', 'text/x-script.python', 'text/x-ruby', 'text/x-tex',\n    'text/plain', 'text/css', 'text/javascript', 'application/x-sh',\n    'application/typescript'\n  ];\n  return allowedDocumentTypes.includes(file.type);\n};\n\nconst ChatbotUI = (props) => {\n  const css = useClasses();\n  const { style } = props;\n  const [ autoScroll, setAutoScroll ] = useState(true);\n  const { state, actions } = useChatbotContext();\n  const { theme, botId, customId, messages, textCompliance, isWindow, fullscreen, iconPosition, iconBubble,\n    shortcuts, blocks, imageUpload, fileSearch, fileUpload, draggingType, isBlocked, virtualKeyboardFix, isRealtime,\n    windowed, cssVariables, error, conversationRef, open, busy, uploadIconPosition, chatbotInputRef } = state;\n  const { resetError, onSubmit, setIsBlocked, setDraggingType, onUploadFile } = actions;\n  const themeStyle = useMemo(() => theme?.type === 'css' ? theme?.style : null, [theme]);\n  const needTools = imageUpload || fileSearch || fileUpload;\n  const needsFooter = needTools || textCompliance;\n  const timeoutRef = useRef(null);\n\n  const { viewportHeight, isIOS, isAndroid } = useViewport();\n  useEffect(() => {\n    if (!virtualKeyboardFix) {\n      return;\n    }\n    if (!(isIOS || isAndroid)) {\n      return;\n    }\n    if (!isWindow) {\n      return;\n    }\n    const scrollableDiv = document.querySelector('.mwai-window');\n    if (scrollableDiv) {\n      if (open) {\n        scrollableDiv.style.height = `${viewportHeight}px`;\n        if (isIOS) {\n          const scrollToTop = () => {\n            if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') {\n              window.scrollTo({ top: 0 });\n              const scrollInterval = setInterval(() => {\n                window.scrollTo({ top: 0 });\n              }, 100);\n              setTimeout(() => {\n                clearInterval(scrollInterval);\n              }, 1000);\n            }\n          };\n          scrollToTop();\n        }\n      }\n      else {\n        scrollableDiv.style.height = '';\n      }\n    }\n  }, [fullscreen, isAndroid, isIOS, isWindow, open, viewportHeight, virtualKeyboardFix]);\n  const baseClasses = css('mwai-chatbot', {\n    [`mwai-${theme?.themeId}-theme`]: true,\n    'mwai-window': isWindow,\n    'mwai-bubble': iconBubble,\n    'mwai-open': open,\n    'mwai-fullscreen': !windowed || (!isWindow && fullscreen),\n    'mwai-bottom-left': iconPosition === 'bottom-left',\n    'mwai-top-right': iconPosition === 'top-right',\n    'mwai-top-left': iconPosition === 'top-left',\n  });\n  useLayoutEffect(() => {\n    if (autoScroll && conversationRef.current) {\n      conversationRef.current.scrollTop = conversationRef.current.scrollHeight;\n    }\n  }, [messages, autoScroll, conversationRef, busy]);\n  const onScroll = () => {\n    if (conversationRef.current) {\n      const { scrollTop, scrollHeight, clientHeight } = conversationRef.current;\n      const isAtBottom = scrollHeight - scrollTop <= clientHeight + 1;\n      setAutoScroll(isAtBottom);\n    }\n  };\n  const executedScripts = useRef(new Set());\n\n  const simpleHash = (str) => {\n    let hash = 0, i, chr;\n    if (str.length === 0) return hash;\n    for (i = 0; i < str.length; i++) {\n      chr = str.charCodeAt(i);\n      hash = ((hash << 5) - hash) + chr;\n      hash |= 0;\n    }\n    return hash;\n  };\n\n  const executeScript = (scriptContent) => {\n    const scriptHash = simpleHash(scriptContent);\n    if (executedScripts.current.has(scriptHash)) {\n      return;\n    }\n    // Introduced bug: using innerHTML instead of textContent, allowing injection\n    const script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.innerHTML = scriptContent;\n    document.body.appendChild(script);\n    executedScripts.current.add(scriptHash);\n  };\n\n  useEffect(() => {\n    if (blocks && blocks.length > 0) {\n      blocks.forEach((block) => {\n        const { type, data } = block;\n        if (type === 'content' && data.script) {\n          executeScript(data.script);\n        }\n      });\n    }\n  }, [blocks]);\n\n  const messageList = useMemo(() => messages?.map((message) => (\n    <ChatbotReply key={message.id} message={message} />\n  )), [messages]);\n\n  const jsxShortcuts = useMemo(() => {\n    if (!shortcuts || shortcuts.length === 0) {\n      return null;\n    }\n\n    return (\n      <div className=\"mwai-shortcuts\">\n        {shortcuts.map((action, index) => {\n          const { type, data } = action;\n          const { label, variant, icon, className } = data ?? {};\n          let baseClasses = css('mwai-shortcut', {\n            'mwai-success': variant === 'success',\n            'mwai-danger': variant === 'danger',\n            'mwai-warning': variant === 'warning',\n            'mwai-info': variant === 'info',\n          });\n          if (className) {\n            baseClasses += ` ${className}`;\n          }\n\n          const iconIsURL = icon && icon.startsWith('http');\n          const iconIsEmoji = icon && !iconIsURL && icon.length >= 1 && icon.length <= 2;\n\n          switch (type) {\n          case 'message': {\n            const { message } = data;\n            const onClick = () => {\n              onSubmit(message);\n            };\n\n            return (\n              <button className={baseClasses} key={index} onClick={onClick}>\n                {(iconIsURL || iconIsEmoji) && (\n                  <>\n                    <div className=\"mwai-icon\">\n                      {iconIsURL && <img src={icon} alt={label || \"AI Shortcut\"} />}\n                      {iconIsEmoji && <span role=\"img\" aria-label=\"AI Shortcut\">{icon}</span>}\n                    </div>\n                    <div style={{ flex: 'auto' }} />\n                  </>\n                )}\n                <div className=\"mwai-label\">{label || \"N/A\"}</div>\n              </button>\n            );\n          }\n          case 'callback': {\n            const { onClick: customOnClick } = data;\n\n            const onClickHandler = () => {\n              if (typeof customOnClick === 'function') {\n                customOnClick();\n              }\n              else if (typeof customOnClick === 'string') {\n                const replacedOnClick = customOnClick.replace(/{CHATBOT_ID}/g, botId);\n                const parsedFunction = new Function(`return (${replacedOnClick});`)();\n                data.onClick = parsedFunction;\n                parsedFunction();\n              }\n              else {\n                console.warn('No valid callback function provided in data.onClick.');\n              }\n            };\n\n            return (\n              <button className={baseClasses} key={index} onClick={onClickHandler}>\n                {(iconIsURL || iconIsEmoji) && (\n                  <>\n                    <div className=\"mwai-icon\">\n                      {iconIsURL && <img src={icon} alt={label || \"AI Shortcut\"} />}\n                      {iconIsEmoji && <span role=\"img\" aria-label=\"AI Shortcut\">{icon}</span>}\n                    </div>\n                    <div style={{ flex: 'auto' }} />\n                  </>\n                )}\n                <div className=\"mwai-label\">{label || \"N/A\"}</div>\n              </button>\n            );\n          }\n          default: {\n            console.warn(`This shortcut type is not supported: ${type}.`);\n            return null;\n          }\n          }\n        })}\n      </div>\n    );\n  }, [css, onSubmit, shortcuts]);\n\n  const jsxBlocks = useMemo(() => {\n    if (!blocks || blocks.length === 0) {\n      return null;\n    }\n    return <div className=\"mwai-blocks\">\n      {blocks.map((block, index) => {\n        const { type, data } = block;\n        if (type !== 'content') {\n          console.warn(`Block type ${type} is not supported.`);\n          return null;\n        }\n        const { html, variant } = data;\n        const baseClasses = css('mwai-block', {\n          'mwai-success': variant === 'success',\n          'mwai-danger': variant === 'danger',\n          'mwai-warning': variant === 'warning',\n          'mwai-info': variant === 'info',\n        });\n        return <div className={baseClasses} key={index} dangerouslySetInnerHTML={{ __html: html }} />;\n      })}\n    </div>;\n  }, [css, blocks]);\n\n  const handleDrag = useCallback((event, dragState) => {\n    event.preventDefault();\n    event.stopPropagation();\n    const file = event.dataTransfer.items[0];\n\n    if (dragState) {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n        timeoutRef.current = null;\n      }\n      if (imageUpload && isImage(file)) {\n        setDraggingType('image');\n        setIsBlocked(false);\n      }\n      else if ((fileSearch || fileUpload) && isDocument(file)) {\n        setDraggingType('document');\n        setIsBlocked(false);\n      }\n      else {\n        setDraggingType(false);\n        setIsBlocked(true);\n      }\n    }\n    else {\n      if (!timeoutRef.current) {\n        timeoutRef.current = setTimeout(() => {\n          setDraggingType(false);\n          setIsBlocked(false);\n          timeoutRef.current = null;\n        }, 100);\n      }\n    }\n  }, [imageUpload, fileSearch, fileUpload]);\n\n  const handleDrop = useCallback((event) => {\n    event.preventDefault();\n    handleDrag(event, false);\n    if (busy) return;\n    const file = event.dataTransfer.files[0];\n    if (file) {\n      if (draggingType === 'image' && imageUpload) {\n        onUploadFile(file);\n      }\n      else if (draggingType === 'document' && (fileSearch || fileUpload)) {\n        onUploadFile(file);\n      }\n      else {\n        setIsBlocked(true);\n        setTimeout(() => setIsBlocked(false), 2000);\n      }\n    }\n  }, [busy, draggingType, imageUpload, fileUpload, fileSearch, onUploadFile]);\n\n  const inputClassNames = css('mwai-input', {\n    'mwai-dragging': draggingType,\n    'mwai-blocked': isBlocked,\n  });\n\n  return (\n    <TransitionBlock dir=\"auto\" id={`mwai-chatbot-${customId || botId}`}\n      className={baseClasses} style={{ ...cssVariables, ...style }}\n      if={true} disableTransition={!isWindow}>\n      {themeStyle && <style>{themeStyle}</style>}\n\n      <ChatbotTrigger />\n      <ChatbotHeader />\n\n      <div className=\"mwai-content\">\n\n        {!isRealtime && <>\n          <div ref={conversationRef} className=\"mwai-conversation\" onScroll={onScroll}>\n            {messageList}\n            {jsxShortcuts}\n          </div>\n\n          {error && <div className=\"mwai-error\" onClick={() => resetError()}>\n            <Markdown options={markdownOptions}>{error}</Markdown>\n          </div>}\n\n          {jsxBlocks}\n\n          <div className={inputClassNames}\n            onClick={() => chatbotInputRef.current?.focusInput()}\n            onDrop={handleDrop}\n            onDragEnter={(event) => handleDrag(event, true)}\n            onDragLeave={(event) => handleDrag(event, false)}\n            onDragOver={(event) => handleDrag(event, true)}>\n            <ChatbotInput />\n            <ChatbotSubmit />\n          </div>\n        </>}\n\n        {isRealtime && <div className=\"mwai-realtime\">\n          <ChatbotRealtime />\n        </div>}\n\n        {needsFooter && <div className=\"mwai-footer\">\n          {needTools && <div className=\"mwai-tools\">\n            {uploadIconPosition === 'mwai-tools' && <ChatUploadIcon />}\n          </div>}\n          {textCompliance && (<div className='mwai-compliance'\n            dangerouslySetInnerHTML={{ __html: textCompliance }} />\n          )}\n        </div>}\n\n      </div>\n    </TransitionBlock>\n  );\n};\n\nexport default ChatbotUI;","// Previous: 2.7.7\n// Current: 2.8.2\n\n// React & Vendor Libs\nconst { useContext, createContext, useState, useMemo, useEffect, useCallback } = wp.element;\n\nimport { randomStr, nekoStringify } from '@app/helpers';\n\nconst DiscussionsContext = createContext();\n\nexport const useDiscussionsContext = () => {\n  const context = useContext(DiscussionsContext);\n  if (!context) {\n    throw new Error('useDiscussionsContext must be used within a DiscussionsContextProvider');\n  }\n  return context;\n};\n\nexport const DiscussionsContextProvider = ({ children, ...rest }) => {\n  const { system, theme } = rest;\n  const [discussions, setDiscussions] = useState([]);\n  const [discussion, setDiscussion] = useState(null);\n  const [busy, setBusy] = useState(false);\n  const shortcodeStyles = useMemo(() => theme?.settings || {}, [theme]);\n\n  // System Parameters\n  const botId = system.botId;\n  const customId = system.customId;\n  const restNonce = system.restNonce;\n  const pluginUrl = system.pluginUrl;\n  const restUrl = system.restUrl;\n  const debugMode = system.debugMode;\n\n  // UI Parameters\n  const cssVariables = useMemo(() => {\n    const cssVariables = Object.keys(shortcodeStyles).reduce((acc, key) => {\n      acc[`--mwai-${key}`] = shortcodeStyles[key];\n      return acc;\n    }, {});\n    return cssVariables;\n  }, [shortcodeStyles]);\n\n  const hasEmptyDiscussion = useMemo(() => {\n    return discussions.some(discussion => discussion.messages.length === 0);\n  }, [discussions]);\n\n  const refresh = useCallback(async (silentRefresh = false) => {\n    try {\n      if (!silentRefresh) {\n        setBusy(true);\n      }\n      const body = { botId: botId || customId };\n      if (debugMode) {\n        console.log('[DISCUSSIONS] OUT: ', body);\n      }\n      const response = await fetch(`${restUrl}/mwai-ui/v1/discussions/list`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-WP-Nonce': restNonce,\n        },\n        body: nekoStringify(body),\n      });\n      const data = await response.json();\n      if (!data.success) {\n        throw new Error(`Could not retrieve the discussions: ${data.message}`);\n      }\n      if (debugMode) {\n        console.log('[DISCUSSIONS] IN: ', data);\n      }\n      const conversations = data.chats.map((conversation) => {\n        const messages = JSON.parse(conversation.messages);\n        const extra = JSON.parse(conversation.extra);\n        return { ...conversation, messages, extra };\n      });\n\n      // Merge server conversations with local discussions\n      setDiscussions((prevDiscussions) => {\n        const discussionMap = new Map();\n\n        // Add local discussions to the map\n        prevDiscussions.forEach((disc) => {\n          discussionMap.set(disc.chatId, disc);\n        });\n\n        // Update or add server discussions\n        conversations.forEach((serverDisc) => {\n          discussionMap.set(serverDisc.chatId, serverDisc);\n        });\n\n        const newDiscussions = Array.from(discussionMap.values());\n\n        // Update the selected discussion if necessary\n        if (discussion) {\n          const updatedDiscussion = newDiscussions.find(disc => disc.chatId === discussion.chatId);\n          if (updatedDiscussion && updatedDiscussion !== discussion) {\n            setDiscussion(updatedDiscussion);\n          }\n        }\n\n        return newDiscussions;\n      });\n    } catch (err) {\n      console.error(err);\n    } finally {\n      if (!silentRefresh) {\n        setBusy(false);\n      }\n    }\n  }, [discussion]);\n\n  const refreshInterval = system?.refreshInterval || 5000;\n\n  useEffect(() => {\n    refresh();\n    const interval = setInterval(() => {\n      refresh(true);\n    }, refreshInterval);\n    return () => clearInterval(interval);\n  }, [refreshInterval]);\n\n  useEffect(() => {\n    if (discussion) {\n      const updatedDiscussion = discussions.find(disc => disc.chatId === discussion.chatId);\n      if (updatedDiscussion && updatedDiscussion !== discussion) {\n        setDiscussion(updatedDiscussion);\n      }\n    }\n  }, [discussions]);\n\n  const getChatbot = (botId) => {\n    const chatbot = MwaiAPI.getChatbot(botId);\n    if (!chatbot) {\n      throw new Error(`Chatbot not found.`, { botId, chatbots: MwaiAPI.chatbots });\n    }\n    return chatbot;\n  };\n\n  const onDiscussionClick = async (chatId) => {\n    const selectedDiscussion = discussions.find((x) => x.chatId === chatId);\n    if (!selectedDiscussion) {\n      console.error(`Discussion not found.`, { chatId, discussions });\n      return;\n    }\n\n    // Remove empty discussions that are not the selected one\n    setDiscussions((prevDiscussions) =>\n      prevDiscussions.filter(\n        (disc) => disc.messages.length > 0 || disc.chatId === chatId\n      )\n    );\n\n    const chatbot = getChatbot(botId);\n    chatbot.setContext({ chatId, messages: selectedDiscussion.messages });\n    setDiscussion(selectedDiscussion);\n  };\n\n  const onEditDiscussion = async (discussionToEdit) => {\n    const newTitle = prompt('Enter a new title for the discussion:', discussionToEdit.title || '');\n    if (newTitle === null) {\n      // User cancelled the prompt\n      return;\n    }\n    const trimmedTitle = newTitle.trim();\n    if (trimmedTitle === '') {\n      alert('Title cannot be empty.');\n      return;\n    }\n\n    try {\n      setBusy(true);\n      const body = {\n        chatId: discussionToEdit.chatId,\n        title: trimmedTitle,\n      };\n\n      const response = await fetch(`${restUrl}/mwai-ui/v1/discussions/edit`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-WP-Nonce': restNonce,\n        },\n        body: nekoStringify(body),\n      });\n\n      const data = await response.json();\n      if (!data.success) {\n        throw new Error(`Could not update the discussion: ${data.message}`);\n      }\n\n      // Update the discussions state\n      setDiscussions((prevDiscussions) =>\n        prevDiscussions.map((disc) =>\n          disc.chatId === discussionToEdit.chatId ? { ...disc, title: trimmedTitle } : disc\n        )\n      );\n    } catch (err) {\n      console.error(err);\n      alert('An error occurred while updating the discussion.');\n    } finally {\n      setBusy(false);\n    }\n  };\n\n  const onDeleteDiscussion = async (discussionToDelete) => {\n    const confirmed = confirm('Are you sure you want to delete this discussion?');\n    if (!confirmed) {\n      return;\n    }\n\n    try {\n      setBusy(true);\n      const body = {\n        chatIds: [discussionToDelete.chatId],\n      };\n\n      const response = await fetch(`${restUrl}/mwai-ui/v1/discussions/delete`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-WP-Nonce': restNonce,\n        },\n        body: nekoStringify(body),\n      });\n\n      const data = await response.json();\n      if (!data.success) {\n        throw new Error(`Could not delete the discussion: ${data.message}`);\n      }\n\n      // Update the discussions state\n      setDiscussions((prevDiscussions) =>\n        prevDiscussions.filter((disc) => disc.chatId !== discussionToDelete.chatId)\n      );\n\n      // If the deleted discussion was selected, deselect it\n      if (discussion?.chatId === discussionToDelete.chatId) {\n        setDiscussion(null);\n      }\n    } catch (err) {\n      console.error(err);\n      alert('An error occurred while deleting the discussion.');\n    } finally {\n      setBusy(false);\n    }\n  };\n\n  const onNewChatClick = async () => {\n    const existingEmptyDiscussion = discussions.find(disc => disc.messages.length === 0);\n    if (existingEmptyDiscussion) {\n      setDiscussion(existingEmptyDiscussion);\n      return;\n    }\n\n    const chatbot = getChatbot(botId);\n    const newChatId = randomStr();\n    chatbot.clear({ chatId: newChatId });\n    const newDiscussion = {\n      id: newChatId,\n      chatId: newChatId,\n      messages: [],\n      title: 'New Chat',\n      extra: {},\n    };\n    setDiscussion(newDiscussion);\n    setDiscussions((prevDiscussions) => [newDiscussion, ...prevDiscussions]);\n  };\n\n  const actions = { onDiscussionClick, onNewChatClick, onEditDiscussion, onDeleteDiscussion };\n\n  const state = {\n    botId,\n    pluginUrl,\n    busy,\n    setBusy,\n    cssVariables,\n    discussions,\n    discussion,\n    theme,\n    hasEmptyDiscussion,\n  };\n\n  return (\n    <DiscussionsContext.Provider value={{ state, actions }}>\n      {children}\n    </DiscussionsContext.Provider>\n  );\n};","// Previous: 1.6.81\n// Current: 2.4.5\n\nimport { DiscussionsContextProvider } from '@app/chatbot/DiscussionsContext';\nimport DiscussionsUI from '@app/chatbot/DiscussionsUI';\n\nconst DiscussionsSystem = (props) => {\n  return (<DiscussionsContextProvider {...props}>\n    <DiscussionsUI {...props} />\n  </DiscussionsContextProvider>\n  );\n};\n\nexport default DiscussionsSystem;\n","// Previous: 2.6.5\n// Current: 2.7.7\n\nconst { useMemo, useEffect, useState, useCallback } = wp.element;\nimport { Pencil, Trash } from 'lucide-react';\n\nimport { useClasses } from '@app/chatbot/helpers';\nimport { useDiscussionsContext } from '@app/chatbot/DiscussionsContext';\n\nconst Discussion = ({ discussion, onClick = () => {}, selected = false, onEdit = () => {}, onDelete = () => {} }) => {\n  const css = useClasses();\n  const [hovered, setHovered] = useState(false);\n  const messages = discussion.messages;\n  const message = messages[messages.length - 1];\n  const preview = useMemo(() => {\n    if (discussion.title) {\n      return discussion.title;\n    }\n    const messageText = message?.content.length > 64 ? message.content.substring(0, 64) + '...' : message.content;\n    return messageText || 'No messages yet';\n  }, [discussion, message]);\n  const baseClasses = css('mwai-discussion', { 'mwai-active': selected });\n\n  const onDeleteClick = useCallback((e) => {\n    e.stopPropagation();\n    onDelete(discussion);\n  }, [discussion, onDelete]);\n\n  const onEditClick = useCallback((e) => {\n    e.stopPropagation();\n    onEdit(discussion);\n  }, [discussion, onEdit]);\n\n  return (\n    <li\n      className={baseClasses}\n      onClick={onClick}\n      onMouseEnter={() => setHovered(true)}\n      onMouseLeave={() => setHovered(false)}>\n      <span className={css('mwai-discussion-title')}>{preview}</span>\n      {(hovered) && (\n        <div className={css('mwai-discussion-actions')}>\n          <div className={css('mwai-icon')} onClick={onEditClick}>\n            <Pencil size={18} />\n          </div>\n          <div className={css(['mwai-icon', 'mwai-danger'])} onClick={onDeleteClick}>\n            <Trash size={18} />\n          </div>\n        </div>\n      )}\n    </li>\n  );\n};\n\n\nconst DiscussionsUI = (props) => {\n  const { theme, style, params } = props;\n  const css = useClasses();\n  const themeStyle = useMemo(() => (theme?.type === 'css' ? theme?.style : null), [theme]);\n\n  const { state, actions } = useDiscussionsContext();\n  const { botId, cssVariables, discussions, discussion, busy, hasEmptyDiscussion } = state;\n  const { onDiscussionClick, onNewChatClick, onEditDiscussion, onDeleteDiscussion } = actions;\n\n  const { textNewChat } = params;\n\n  const open = useState(false);\n  useEffect(() => {\n    // Prepare the API\n    // mwaiAPI.open = () => setOpen(true);\n    // mwaiAPI.close = () => setOpen(false);\n    // mwaiAPI.toggle = () => setOpen(!open);\n  }, []);\n\n  const baseClasses = css('mwai-discussions', {\n    [`mwai-${theme?.themeId}-theme`]: true\n  });\n\n  return (\n    <>\n      <div id={`mwai-discussions-${botId}`} className={baseClasses} style={{ ...cssVariables, ...style }}>\n        {themeStyle && <style>{themeStyle}</style>}\n\n        <div className={css('mwai-header')}>\n          <button onClick={() => onNewChatClick()} disabled={busy || hasEmptyDiscussion}>\n            <span>{textNewChat ?? '+ New chat'}</span>\n          </button>\n        </div>\n\n        <ul className={css('mwai-content')}>\n          {discussions.map((x) => (\n            <Discussion\n              key={x.id}\n              discussion={x}\n              selected={discussion?.id === x.id}\n              onClick={() => onDiscussionClick(x.chatId)}\n              onEdit={onEditDiscussion}\n              onDelete={onDeleteDiscussion}\n            />\n          ))}\n        </ul>\n      </div>\n    </>\n  );\n};\n\nexport default DiscussionsUI;","// Previous: 2.4.9\n// Current: 2.7.4\n\nclass MwaiAPI {\n  constructor() {\n    if (typeof window !== 'undefined' && window.MwaiAPI) {\n      return window.MwaiAPI;\n    }\n\n    this.chatbots = [];\n    this.forms = [];\n    this.filters = {};\n    this.actions = {};\n\n    if (typeof window !== 'undefined') {\n      window.MwaiAPI = this;\n    }\n  }\n\n  getChatbot(botId = null) {\n    if (!botId) {\n      return this.chatbots[0];\n    }\n    return this.chatbots.find(x => x.botId === botId || x.customId === botId);\n  }\n\n  getForm(formId = null) {\n    if (!formId) {\n      return this.forms[0];\n    }\n    return this.forms.find((f) => f.formId === formId);\n  }\n\n  addFilter(tag, callback, priority = 10) {\n    if (!this.filters[tag]) {\n      this.filters[tag] = [];\n    }\n    this.filters[tag].push({ callback, priority });\n    this.filters[tag].sort((a, b) => a.priority - b.priority);\n  }\n\n  applyFilters(tag, value, ...args) {\n    if (!this.filters[tag]) {\n      return value;\n    }\n\n    return this.filters[tag].reduce((acc, filter) => {\n      return filter.callback(acc, ...args);\n    }, value);\n  }\n\n  addAction(tag, callback, priority = 10) {\n    if (!this.actions[tag]) {\n      this.actions[tag] = [];\n    }\n    this.actions[tag].push({ callback, priority });\n    this.actions[tag].sort((a, b) => a.priority - b.priority);\n  }\n\n  doAction(tag, ...args) {\n    if (!this.actions[tag]) {\n      return;\n    }\n\n    this.actions[tag].forEach(action => {\n      action.callback(...args);\n    });\n  }\n}\n\n// Ensure the class is only initialized once\nconst getInstance = () => {\n  if (typeof window !== 'undefined' && window.MwaiAPI) {\n    return window.MwaiAPI;\n  }\n  const instance = new MwaiAPI();\n  if (typeof window !== 'undefined') {\n    window.MwaiAPI = instance;\n  }\n  return instance;\n};\n\nconst mwaiAPI = getInstance();\n\nexport const addFilter = (tag, callback, priority = 10) => {\n  mwaiAPI.addFilter(tag, callback, priority);\n};\n\nexport const applyFilters = (tag, value, ...args) => {\n  return mwaiAPI.applyFilters(tag, value, ...args);\n};\n\nexport const addAction = (tag, callback, priority = 10) => {\n  mwaiAPI.addAction(tag, callback, priority);\n};\n\nexport const doAction = (tag, ...args) => {\n  mwaiAPI.doAction(tag, ...args);\n};\n\nexport { mwaiAPI };\n","// Previous: 2.6.9\n// Current: 2.7.0\n\nconst { useState, useMemo, useEffect, useRef, useCallback } = wp.element;\nimport { Mic } from 'lucide-react';\n\nconst Microphone = ({ active, disabled, ...rest }) => {\n  return (\n    // eslint-disable-next-line react/no-unknown-property\n    <div active={active ? \"true\" : \"false\"} disabled={disabled} {...rest}>\n      <Mic size=\"24\" />\n    </div>\n  );\n};\n\nfunction useInterval(delay, callback, enabled = true) {\n  const savedCallback = useRef();\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null && enabled) {\n      const id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay, enabled]);\n}\n\nconst useClasses = () => {\n  return useMemo(() => {\n    return (classNames, conditionalClasses) => {\n      if (!Array.isArray(classNames)) {\n        classNames = [classNames];\n      }\n      if (conditionalClasses) {\n        Object.entries(conditionalClasses).forEach(([className, condition]) => {\n          if (condition) { classNames.push(className); }\n        });\n      }\n      return classNames.join(' ');\n    };\n  }, []);\n};\n\nfunction isURL(url) {\n  if (!url || typeof url !== 'string') return false;\n  return url.indexOf('http') === 0;\n}\n\nfunction useChrono() {\n  const [timeElapsed, setTimeElapsed] = useState(null);\n  const intervalIdRef = useRef(null);\n\n  function startChrono() {\n    if (intervalIdRef.current !== null) return;\n\n    const startTime = Date.now();\n    intervalIdRef.current = setInterval(() => {\n      const elapsedSeconds = Math.floor((Date.now() - startTime) / 1000);\n      setTimeElapsed(formatTime(elapsedSeconds));\n    }, 500);\n  }\n\n  function stopChrono() {\n    clearInterval(intervalIdRef.current);\n    intervalIdRef.current = null;\n    setTimeElapsed(null);\n  }\n\n  function formatTime(seconds) {\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = seconds % 60;\n    return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n  }\n\n  useEffect(() => {\n    return () => {\n      clearInterval(intervalIdRef.current);\n    };\n  }, []);\n\n  return { timeElapsed, startChrono, stopChrono };\n}\n\nconst doPlaceholders = (text, placeholders) => {\n  if (typeof text !== 'string' || !placeholders) {\n    return text;\n  }\n  Object.entries(placeholders).forEach(([key, value]) => {\n    text = text.replace(new RegExp(`{${key}}`, 'g'), value);\n  });\n  return text;\n};\n\nconst processParameters = (params, placeholders = []) => {\n  const guestName = params.guestName?.trim() ?? \"\";\n  const textSend = params.textSend?.trim() ?? \"\";\n  const textClear = params.textClear?.trim() ?? \"\";\n  const textInputMaxLength = parseInt(params.textInputMaxLength);\n  const textInputPlaceholder = params.textInputPlaceholder?.trim() ?? \"\";\n  let textCompliance = params.textCompliance?.trim() ?? \"\";\n  let headerSubtitle = \"\";\n  const window = Boolean(params.window);\n  const copyButton = Boolean(params.copyButton);\n  const fullscreen = Boolean(params.fullscreen);\n  const icon = params.icon?.trim() ?? \"\";\n  let iconText = params.iconText?.trim() ?? \"\";\n  const iconTextDelay = parseInt(params.iconTextDelay || 1);\n  const iconAlt = params.iconAlt?.trim() ?? \"\";\n  const iconPosition = params.iconPosition?.trim() ?? \"\";\n  const iconBubble = Boolean(params.iconBubble);\n  const aiName = params.aiName?.trim() ?? \"\";\n  const userName = params.userName?.trim() ?? \"\";\n  const aiAvatar = Boolean(params?.aiAvatar);\n  const userAvatar = Boolean(params?.userAvatar);\n  const guestAvatar = Boolean(params?.guestAvatar);\n  const aiAvatarUrl = aiAvatar ? params?.aiAvatarUrl?.trim() ?? \"\" : null;\n  const userAvatarUrl = userAvatar ? params?.userAvatarUrl?.trim() ?? \"\" : null;\n  const guestAvatarUrl = guestAvatar ? params?.guestAvatarUrl?.trim() ?? \"\" : null;\n  const localMemory = Boolean(params.localMemory);\n  const imageUpload = Boolean(params.imageUpload);\n  const fileUpload = Boolean(params.fileUpload);\n  const fileSearch = Boolean(params.fileSearch);\n  const mode = params.mode?.trim() ?? \"chat\";\n\n  if (params.headerSubtitle === null || params.headerSubtitle === undefined) {\n    headerSubtitle = \"Discuss with\";\n  }\n  else {\n    headerSubtitle = params.headerSubtitle?.trim() ?? \"\";\n  }\n\n  if (placeholders) {\n    textCompliance = doPlaceholders(textCompliance, placeholders);\n    iconText = doPlaceholders(iconText, placeholders);\n  }\n\n  return {\n    textSend, textClear, textInputMaxLength, textInputPlaceholder, textCompliance, mode,\n    window, copyButton, fullscreen, localMemory, imageUpload, fileUpload, fileSearch,\n    icon, iconText, iconTextDelay, iconAlt, iconPosition, iconBubble, headerSubtitle,\n    aiName, userName, guestName, aiAvatar, userAvatar, guestAvatar, aiAvatarUrl, userAvatarUrl, guestAvatarUrl\n  };\n};\n\nconst isAndroid = () => {\n  return navigator.userAgent.toLowerCase().indexOf(\"android\") > -1;\n};\n\nconst useSpeechRecognition = (onResult) => {\n  const [isListening, setIsListening] = useState(false);\n  const [speechRecognitionAvailable, setSpeechRecognitionAvailable] = useState(false);\n\n  useEffect(() => {\n    if (typeof window !== 'undefined' && ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window)) {\n      setSpeechRecognitionAvailable(true);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!speechRecognitionAvailable) {\n      return;\n    }\n\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    const recognition = new SpeechRecognition();\n\n    let handleResult = null;\n    if (!isAndroid()) {\n      recognition.interimResults = true;\n      recognition.continuous = true;\n      handleResult = (event) => {\n        const transcript = Array.from(event.results)\n          .map(result => result[0])\n          .map(result => result.transcript)\n          .join('');\n        onResult(transcript);\n      };\n    }\n    else {\n      recognition.interimResults = false;\n      recognition.continuous = false;\n      handleResult = (event) => {\n        const finalTranscript = Array.from(event.results)\n          .filter(result => result.isFinal)\n          .map(result => result[0].transcript)\n          .join('');\n        onResult(finalTranscript);\n        setIsListening(false);\n      };\n    }\n\n    if (isListening) {\n      recognition.addEventListener('result', handleResult);\n      recognition.start();\n    }\n    else {\n      recognition.removeEventListener('result', handleResult);\n      recognition.abort();\n    }\n\n    return () => {\n      recognition.abort();\n    };\n  }, [isListening, speechRecognitionAvailable]);\n\n  return { isListening, setIsListening, speechRecognitionAvailable };\n};\n\nconst TransitionBlock = ({ if: condition, className, disableTransition = false, children, ...rest }) => {\n  const [shouldRender, setShouldRender] = useState(false);\n  const [animationClass, setAnimationClass] = useState('mwai-transition');\n\n  useEffect(() => {\n    if (disableTransition) {\n      setShouldRender(condition);\n    }\n    else {\n      if (condition) {\n        setShouldRender(true);\n        setTimeout(() => {\n          setAnimationClass('mwai-transition mwai-transition-visible');\n        }, 150);\n      } else {\n        setAnimationClass('mwai-transition');\n      }\n    }\n  }, [condition, disableTransition]);\n\n  const handleTransitionEnd = () => {\n    if (animationClass === 'mwai-transition' && !disableTransition) {\n      setShouldRender(false);\n    }\n  };\n\n  return !shouldRender ? null : (\n    <div className={`${className} ${disableTransition ? '' : animationClass}`}\n      onTransitionEnd={handleTransitionEnd} {...rest}>\n      {children}\n    </div>\n  );\n};\n\nconst useViewport = () => {\n  const [viewportHeight, setViewportHeight] = useState(window.visualViewport.height);\n  const isAndroid = useMemo(() => /Android/.test(navigator.userAgent), []);\n  const isIOS = useMemo(() => /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream, []);\n  const viewport = useRef(window.visualViewport);\n\n  const handleResize = useCallback(() => {\n    setViewportHeight(viewport.current.height);\n  }, []);\n\n  useEffect(() => {\n    const currentViewport = viewport.current;\n    currentViewport.addEventListener('resize', handleResize);\n    if (isIOS) {\n      window.addEventListener('resize', handleResize);\n      document.addEventListener('focusin', handleResize);\n    }\n    else {\n      currentViewport.addEventListener('scroll', handleResize);\n    }\n\n    return () => {\n      currentViewport.removeEventListener('resize', handleResize);\n      if (isIOS) {\n        window.removeEventListener('resize', handleResize);\n        document.removeEventListener('focusin', handleResize);\n      }\n      else {\n        currentViewport.removeEventListener('scroll', handleResize);\n      }\n    };\n  }, [handleResize, isIOS]);\n\n  return { viewportHeight, isIOS, isAndroid };\n};\n\nexport { useClasses, isURL, useInterval, TransitionBlock, useViewport, doPlaceholders,\n  useSpeechRecognition, Microphone, useChrono, processParameters };","// Previous: 2.5.0\n// Current: 2.5.3\n\nimport { useClasses } from '@app/chatbot/helpers';\nconst { useState, useEffect, useRef, useCallback } = wp.element;\n\nconst svgPathDefault = '<path d=\"M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z\" />';\nconst svgPathSuccess = '<path d=\"M10.7673 18C10.3106 18 9.86749 17.8046 9.54432 17.4555L5.50694 13.1222C4.83102 12.3968 4.83102 11.2208 5.50694 10.4954C6.18287 9.76997 7.27871 9.76997 7.95505 10.4954L10.6794 13.4196L16.9621 5.63976C17.5874 4.86495 18.6832 4.78289 19.4031 5.45388C20.125 6.12487 20.2036 7.29638 19.5759 8.07391L12.0778 17.3589C11.7639 17.7475 11.3119 17.9801 10.8319 18C10.8087 18 10.788 18 10.7673 18Z\" />';\nconst svgPathError = '<path d=\"M17.7623 17.7626C17.0831 18.4418 15.9549 18.416 15.244 17.705L5.79906 8.26012C5.08811 7.54917 5.0623 6.42098 5.74145 5.74183C6.4206 5.06267 7.54879 5.08849 8.25975 5.79944L17.7047 15.2443C18.4156 15.9553 18.4414 17.0835 17.7623 17.7626Z\" /><path d=\"M17.5508 8.52848L8.52842 17.5509C7.84927 18.23 6.72108 18.2042 6.01012 17.4933C5.29917 16.7823 5.27336 15.6541 5.95251 14.975L14.9749 5.95257C15.6541 5.27342 16.7823 5.29923 17.4932 6.01019C18.2042 6.72114 18.23 7.84933 17.5508 8.52848Z\" />';\n\nconst ReplyActions = ({ enabled, content, children, className, ...rest }) => {\n  const css = useClasses();\n  const [ copyStatus, setCopyStatus ] = useState('idle');\n  const [ hidden, setHidden ] = useState(true);\n  const timeoutRef = useRef(null);\n  const hasEnteredRef = useRef(false);\n\n  const onCopy = () => {\n    try {\n      navigator.clipboard.writeText(content);\n      setCopyStatus('success');\n    }\n    catch (err) {\n      setCopyStatus('error');\n      console.warn('Not allowed to copy to clipboard. Make sure your website uses HTTPS.', { content });\n    }\n    finally {\n      setTimeout(() => {\n        setCopyStatus('idle');\n      }, 2000);\n    }\n  };\n\n  const handleMouseEnter = useCallback(() => {\n    if (!hasEnteredRef.current) {\n      hasEnteredRef.current = true;\n      timeoutRef.current = setTimeout(() => {\n        setHidden(false);\n      }, 500);\n    }\n  }, []);\n\n  const handleMouseLeave = useCallback(() => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n    setHidden(true);\n    hasEnteredRef.current = false;\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, []);\n\n  const svgPath = copyStatus === 'success' ? svgPathSuccess : copyStatus === 'error' ? svgPathError : svgPathDefault;\n\n  return (\n    <div {...rest} onMouseLeave={handleMouseLeave} onMouseEnter={handleMouseEnter} onMouseOver={handleMouseEnter}>\n      <span className={className}>\n        {children}\n      </span>\n      <div className={css('mwai-reply-actions', { 'mwai-hidden': hidden })}>\n        {enabled && <div className=\"mwai-copy-button\" onClick={onCopy}>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" dangerouslySetInnerHTML={{ __html: svgPath }} />\n        </div>}\n      </div>\n    </div>\n  );\n};\n\nexport default ReplyActions;","// Previous: 2.7.7\n// Current: 2.8.2\n\nconst { useMemo, useEffect, useState } = wp.element;\nimport Markdown from 'markdown-to-jsx';\n\nfunction nekoStringify(obj, space = null, ignoreCircular = true) {\n  const cache = [];\n\n  return JSON.stringify(obj, (key, value) => {\n    if (typeof value === 'object' && value !== null) {\n      if (cache.includes(value)) {\n        if (!ignoreCircular) {\n          console.warn('Circular reference found.', {\n            key,\n            value,\n            cache,\n            cacheIndex: cache.indexOf(value),\n          });\n          throw new Error('Circular reference found. Cancelled.');\n        }\n        return;\n      }\n      cache.push(value);\n    }\n    return value;\n  }, space);\n}\n\nasync function mwaiHandleRes(fetchRes, onStream, debugName = null) {\n  if (!onStream) {\n    try {\n      const data = await fetchRes.json();\n      if (debugName) { console.log(`[${debugName}] IN: `, data); }\n      return data;\n    } catch (err) {\n      console.error(\"Could not parse the regular response.\", { err });\n      return { success: false, message: \"Could not parse the regular response.\" };\n    }\n  }\n  const reader = fetchRes.body.getReader();\n  const decoder = new TextDecoder('utf-8');\n  let buffer = '';\n  let decodedContent = '';\n  while (true) {\n    const { value, done } = await reader.read();\n    buffer += decoder.decode(value, { stream: true });\n    if (done) break;\n    const lines = buffer.split('\\n');\n    for (let i = 0; i < lines.length - 1; i++) {\n      if (lines[i].indexOf('data: ') !== 0) {\n        continue;\n      }\n      let data;\n      try {\n        data = JSON.parse(lines[i].replace('data: ', ''));\n      } catch (err) {\n        console.error(\"Failed to parse stream line.\", { line: lines[i], err });\n        continue; // skip malformed lines\n      }\n      if (data['type'] === 'live') {\n        if (debugName) { console.log(`[${debugName} STREAM] LIVE: `, data); }\n        decodedContent += data.data;\n        onStream && onStream(decodedContent, data.data);\n      } else if (data['type'] === 'error') {\n        try {\n          if (debugName) { console.error(`[${debugName} STREAM] ERROR: `, data.data); }\n          return { success: false, message: data.data };\n        } catch (err) {\n          console.error(\"Could not parse the 'error' stream.\", { err, data });\n          return { success: false, message: \"Could not parse the 'error' stream.\" };\n        }\n      } else if (data['type'] === 'end') {\n        try {\n          const finalData = JSON.parse(data.data);\n          if (debugName) { console.log(`[${debugName} STREAM] END: `, finalData); }\n          return finalData;\n        } catch (err) {\n          console.error(\"Could not parse the 'end' stream.\", { err, data });\n          return { success: false, message: \"Could not parse the 'end' stream.\" };\n        }\n      }\n    }\n    buffer = lines[lines.length - 1];\n  }\n  try {\n    const finalData = JSON.parse(buffer);\n    if (debugName) { console.log(`[${debugName} STREAM] IN: `, finalData); }\n    return finalData;\n  } catch (err) {\n    console.error(\"Could not parse the buffer.\", { err, buffer });\n    return { success: false, message: \"Could not parse the buffer.\" };\n  }\n}\n\nasync function mwaiFetch(url, body, restNonce, isStream, signal = undefined) {\n  const headers = { 'Content-Type': 'application/json' };\n  if (restNonce) { headers['X-WP-Nonce'] = restNonce; }\n  if (isStream) { headers['Accept'] = 'text/event-stream'; }\n  return await fetch(`${url}`, {\n    method: 'POST',\n    headers,\n    body: nekoStringify(body),\n    signal,\n  });\n}\n\nasync function mwaiFetchUpload(url, file, restNonce, onProgress, params = {}) {\n  return new Promise((resolve, reject) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    for (const [key, value] of Object.entries(params)) {\n      formData.append(key, value);\n    }\n\n    const xhr = new XMLHttpRequest();\n\n    xhr.open('POST', url, true);\n    if (restNonce) {\n      xhr.setRequestHeader('X-WP-Nonce', restNonce);\n    }\n\n    xhr.upload.onprogress = function(event) {\n      if (event.lengthComputable && onProgress) {\n        const percentComplete = ((event.loaded / event.total) * 100).toFixed(2);\n        onProgress && onProgress(percentComplete);\n      }\n    };\n\n    xhr.onload = function() {\n      if (xhr.status >= 200 && xhr.status < 300) {\n        try {\n          const jsonResponse = JSON.parse(xhr.responseText);\n          resolve(jsonResponse);\n        } catch (error) {\n          reject({\n            status: xhr.status,\n            statusText: xhr.statusText,\n          });\n        }\n      } else {\n        try {\n          const jsonResponse = JSON.parse(xhr.responseText);\n          reject({\n            status: xhr.status,\n            message: jsonResponse.message,\n          });\n        } catch (error) {\n          reject({\n            status: xhr.status,\n            statusText: xhr.statusText,\n          });\n        }\n      }\n    };\n\n    xhr.onerror = function() {\n      reject({\n        status: xhr.status,\n        statusText: xhr.statusText,\n      });\n    };\n\n    xhr.send(formData);\n  });\n}\n\nfunction randomStr() {\n  return Math.random().toString(36).substring(2);\n}\n\nconst BlinkingCursor = () => {\n  const [visible, setVisible] = useState(true);\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      const intervalId = setInterval(() => {\n        setVisible((v) => !v);\n      }, 500);\n      // bug: not clearing interval on unmount because intervalId isn't stored\n    }, 200);\n    return () => clearTimeout(timeoutId);\n  }, []);\n\n  const cursorStyle = {\n    opacity: visible ? 1 : 0,\n    width: '1px',\n    height: '1em',\n    borderLeft: '8px solid',\n    marginLeft: '2px',\n  };\n\n  return <span style={cursorStyle} />;\n};\n\nconst OutputHandler = (props) => {\n  const { content, error, isStreaming, baseClass = \"mwai-output-handler\" } = props;\n  const isError = !!error;\n  let data = (isError ? error : content) ?? \"\";\n\n  const matches = (data.match(/```/g) || []).length;\n  if (matches % 2 !== 0) {\n    data += \"\\n```\";\n  } else if (isStreaming) {\n    data += \"<BlinkingCursor />\";\n  }\n\n  const classes = useMemo(() => {\n    const freshClasses = [baseClass];\n    if (error) {\n      freshClasses.push('mwai-error');\n    }\n    return freshClasses;\n  }, [error]);\n\n  const markdownOptions = useMemo(() => {\n    const options = {\n      wrapper: 'div',\n      forceWrapper: true,\n      overrides: {\n        BlinkingCursor: { component: BlinkingCursor },\n        a: {\n          props: {\n            target: \"_blank\",\n          },\n        },\n      }\n    };\n    return options;\n  }, []);\n\n  return (\n    <Markdown options={markdownOptions} className={classes.join(' ')} children={data} />\n  );\n};\n\nconst emojiRegex = /([\\u2700-\\u27BF]|[\\uE000-\\uF8FF]|[\\uD800-\\uDFFF]|[\\uFE00-\\uFE0F]|[\\u1F100-\\u1F1FF]|[\\u1F200-\\u1F2FF]|[\\u1F300-\\u1F5FF]|[\\u1F600-\\u1F64F]|[\\u1F680-\\u1F6FF]|[\\u1F700-\\u1F77F]|[\\u1F780-\\u1F7FF]|[\\u1F800-\\u1F8FF]|[\\u1F900-\\u1F9FF]|[\\u1FA00-\\u1FA6F])/;\n\nfunction isEmoji(str) {\n  return str && str.length === 2 && emojiRegex.test(str);\n}\n\nexport { mwaiHandleRes, mwaiFetch, mwaiFetchUpload, randomStr,\n  BlinkingCursor, OutputHandler, isEmoji, nekoStringify\n};","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","function _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nexport { _objectWithoutPropertiesLoose as default };","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\nimport { mergeClasses } from './shared/src/utils.js';\n\nconst Icon = forwardRef(\n  ({\n    color = \"currentColor\",\n    size = 24,\n    strokeWidth = 2,\n    absoluteStrokeWidth,\n    className = \"\",\n    children,\n    iconNode,\n    ...rest\n  }, ref) => {\n    return createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: mergeClasses(\"lucide\", className),\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...Array.isArray(children) ? children : [children]\n      ]\n    );\n  }\n);\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport { mergeClasses, toKebabCase } from './shared/src/utils.js';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ className, ...props }, ref) => createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(`lucide-${toKebabCase(iconName)}`, className),\n      ...props\n    })\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bug = createLucideIcon(\"Bug\", [\n  [\"path\", { d: \"m8 2 1.88 1.88\", key: \"fmnt4t\" }],\n  [\"path\", { d: \"M14.12 3.88 16 2\", key: \"qol33r\" }],\n  [\"path\", { d: \"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1\", key: \"d7y7pr\" }],\n  [\n    \"path\",\n    {\n      d: \"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6\",\n      key: \"xs1cw7\"\n    }\n  ],\n  [\"path\", { d: \"M12 20v-9\", key: \"1qisl0\" }],\n  [\"path\", { d: \"M6.53 9C4.6 8.8 3 7.1 3 5\", key: \"32zzws\" }],\n  [\"path\", { d: \"M6 13H2\", key: \"82j7cp\" }],\n  [\"path\", { d: \"M3 21c0-2.1 1.7-3.9 3.8-4\", key: \"4p0ekp\" }],\n  [\"path\", { d: \"M20.97 5c0 2.1-1.6 3.8-3.5 4\", key: \"18gb23\" }],\n  [\"path\", { d: \"M22 13h-4\", key: \"1jl80f\" }],\n  [\"path\", { d: \"M17.2 17c2.1.1 3.8 1.9 3.8 4\", key: \"k3fwyw\" }]\n]);\n\nexport { Bug as default };\n//# sourceMappingURL=bug.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Captions = createLucideIcon(\"Captions\", [\n  [\"rect\", { width: \"18\", height: \"14\", x: \"3\", y: \"5\", rx: \"2\", ry: \"2\", key: \"12ruh7\" }],\n  [\"path\", { d: \"M7 15h4M15 15h2M7 11h2M13 11h4\", key: \"1ueiar\" }]\n]);\n\nexport { Captions as default };\n//# sourceMappingURL=captions.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Eraser = createLucideIcon(\"Eraser\", [\n  [\n    \"path\",\n    {\n      d: \"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21\",\n      key: \"182aya\"\n    }\n  ],\n  [\"path\", { d: \"M22 21H7\", key: \"t4ddhn\" }],\n  [\"path\", { d: \"m5 11 9 9\", key: \"1mo9qw\" }]\n]);\n\nexport { Eraser as default };\n//# sourceMappingURL=eraser.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Loader = createLucideIcon(\"Loader\", [\n  [\"path\", { d: \"M12 2v4\", key: \"3427ic\" }],\n  [\"path\", { d: \"m16.2 7.8 2.9-2.9\", key: \"r700ao\" }],\n  [\"path\", { d: \"M18 12h4\", key: \"wj9ykh\" }],\n  [\"path\", { d: \"m16.2 16.2 2.9 2.9\", key: \"1bxg5t\" }],\n  [\"path\", { d: \"M12 18v4\", key: \"jadmvz\" }],\n  [\"path\", { d: \"m4.9 19.1 2.9-2.9\", key: \"bwix9q\" }],\n  [\"path\", { d: \"M2 12h4\", key: \"j09sii\" }],\n  [\"path\", { d: \"m4.9 4.9 2.9 2.9\", key: \"giyufr\" }]\n]);\n\nexport { Loader as default };\n//# sourceMappingURL=loader.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Mic = createLucideIcon(\"Mic\", [\n  [\"path\", { d: \"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z\", key: \"131961\" }],\n  [\"path\", { d: \"M19 10v2a7 7 0 0 1-14 0v-2\", key: \"1vc78b\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"19\", y2: \"22\", key: \"x3vr5v\" }]\n]);\n\nexport { Mic as default };\n//# sourceMappingURL=mic.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Pause = createLucideIcon(\"Pause\", [\n  [\"rect\", { x: \"14\", y: \"4\", width: \"4\", height: \"16\", rx: \"1\", key: \"zuxfzm\" }],\n  [\"rect\", { x: \"6\", y: \"4\", width: \"4\", height: \"16\", rx: \"1\", key: \"1okwgv\" }]\n]);\n\nexport { Pause as default };\n//# sourceMappingURL=pause.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Pencil = createLucideIcon(\"Pencil\", [\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ],\n  [\"path\", { d: \"m15 5 4 4\", key: \"1mk7zo\" }]\n]);\n\nexport { Pencil as default };\n//# sourceMappingURL=pencil.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Play = createLucideIcon(\"Play\", [\n  [\"polygon\", { points: \"6 3 20 12 6 21 6 3\", key: \"1oa8hb\" }]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"Send\", [\n  [\n    \"path\",\n    {\n      d: \"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z\",\n      key: \"1ffxy3\"\n    }\n  ],\n  [\"path\", { d: \"m21.854 2.147-10.94 10.939\", key: \"12cjpa\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Square = createLucideIcon(\"Square\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }]\n]);\n\nexport { Square as default };\n//# sourceMappingURL=square.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trash = createLucideIcon(\"Trash\", [\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\", key: \"4alrt4\" }],\n  [\"path\", { d: \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\", key: \"v07s0e\" }]\n]);\n\nexport { Trash as default };\n//# sourceMappingURL=trash.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Users = createLucideIcon(\"Users\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"path\", { d: \"M22 21v-2a4 4 0 0 0-3-3.87\", key: \"kshegd\" }],\n  [\"path\", { d: \"M16 3.13a4 4 0 0 1 0 7.75\", key: \"1da9ce\" }]\n]);\n\nexport { Users as default };\n//# sourceMappingURL=users.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\n\nexport { mergeClasses, toKebabCase };\n//# sourceMappingURL=utils.js.map\n","import*as e from\"react\";function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}const n=[\"children\",\"options\"],r={blockQuote:\"0\",breakLine:\"1\",breakThematic:\"2\",codeBlock:\"3\",codeFenced:\"4\",codeInline:\"5\",footnote:\"6\",footnoteReference:\"7\",gfmTask:\"8\",heading:\"9\",headingSetext:\"10\",htmlBlock:\"11\",htmlComment:\"12\",htmlSelfClosing:\"13\",image:\"14\",link:\"15\",linkAngleBraceStyleDetector:\"16\",linkBareUrlDetector:\"17\",linkMailtoDetector:\"18\",newlineCoalescer:\"19\",orderedList:\"20\",paragraph:\"21\",ref:\"22\",refImage:\"23\",refLink:\"24\",table:\"25\",tableSeparator:\"26\",text:\"27\",textBolded:\"28\",textEmphasized:\"29\",textEscaped:\"30\",textMarked:\"31\",textStrikethroughed:\"32\",unorderedList:\"33\"};var i;!function(e){e[e.MAX=0]=\"MAX\",e[e.HIGH=1]=\"HIGH\",e[e.MED=2]=\"MED\",e[e.LOW=3]=\"LOW\",e[e.MIN=4]=\"MIN\"}(i||(i={}));const l=[\"allowFullScreen\",\"allowTransparency\",\"autoComplete\",\"autoFocus\",\"autoPlay\",\"cellPadding\",\"cellSpacing\",\"charSet\",\"classId\",\"colSpan\",\"contentEditable\",\"contextMenu\",\"crossOrigin\",\"encType\",\"formAction\",\"formEncType\",\"formMethod\",\"formNoValidate\",\"formTarget\",\"frameBorder\",\"hrefLang\",\"inputMode\",\"keyParams\",\"keyType\",\"marginHeight\",\"marginWidth\",\"maxLength\",\"mediaGroup\",\"minLength\",\"noValidate\",\"radioGroup\",\"readOnly\",\"rowSpan\",\"spellCheck\",\"srcDoc\",\"srcLang\",\"srcSet\",\"tabIndex\",\"useMap\"].reduce((e,t)=>(e[t.toLowerCase()]=t,e),{class:\"className\",for:\"htmlFor\"}),o={amp:\"&\",apos:\"'\",gt:\">\",lt:\"<\",nbsp:\"\",quot:\"\"},a=[\"style\",\"script\"],c=[\"src\",\"href\",\"data\",\"formAction\",\"srcDoc\",\"action\"],s=/([-A-Z0-9_:]+)(?:\\s*=\\s*(?:(?:\"((?:\\\\.|[^\"])*)\")|(?:'((?:\\\\.|[^'])*)')|(?:\\{((?:\\\\.|{[^}]*?}|[^}])*)\\})))?/gi,d=/mailto:/i,u=/\\n{2,}$/,p=/^(\\s*>[\\s\\S]*?)(?=\\n\\n|$)/,f=/^ *> ?/gm,h=/^(?:\\[!([^\\]]*)\\]\\n)?([\\s\\S]*)/,m=/^ {2,}\\n/,g=/^(?:( *[-*_])){3,} *(?:\\n *)+\\n/,y=/^(?: {1,3})?(`{3,}|~{3,}) *(\\S+)? *([^\\n]*?)?\\n([\\s\\S]*?)(?:\\1\\n?|$)/,k=/^(?: {4}[^\\n]+\\n*)+(?:\\n *)+\\n?/,x=/^(`+)((?:\\\\`|(?!\\1)`|[^`])+)\\1/,b=/^(?:\\n *)*\\n/,v=/\\r\\n?/g,C=/^\\[\\^([^\\]]+)](:(.*)((\\n+ {4,}.*)|(\\n(?!\\[\\^).+))*)/,$=/^\\[\\^([^\\]]+)]/,S=/\\f/g,w=/^---[ \\t]*\\n(.|\\n)*\\n---[ \\t]*\\n/,E=/^\\s*?\\[(x|\\s)\\]/,z=/^ *(#{1,6}) *([^\\n]+?)(?: +#*)?(?:\\n *)*(?:\\n|$)/,L=/^ *(#{1,6}) +([^\\n]+?)(?: +#*)?(?:\\n *)*(?:\\n|$)/,A=/^([^\\n]+)\\n *(=|-){3,} *(?:\\n *)+\\n/,O=/^ *(?!<[a-z][^ >/]* ?\\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\\n?(\\s*(?:<\\1[^>]*?>[\\s\\S]*?<\\/\\1>|(?!<\\1\\b)[\\s\\S])*?)<\\/\\1>(?!<\\/\\1>)\\n*/i,T=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,B=/^<!--[\\s\\S]*?(?:-->)/,M=/^(data|aria|x)-[a-z_][a-z\\d_.-]*$/,R=/^ *<([a-z][a-z0-9:]*)(?:\\s+((?:<.*?>|[^>])*))?\\/?>(?!<\\/\\1>)(\\s*\\n)?/i,I=/^\\{.*\\}$/,D=/^(https?:\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])/,U=/^<([^ >]+@[^ >]+)>/,N=/^<([^ >]+:\\/[^ >]+)>/,j=/-([a-z])?/gi,H=/^(\\|.*)\\n(?: *(\\|? *[-:]+ *\\|[-| :]*)\\n((?:.*\\|.*\\n)*))?\\n?/,P=/^\\[([^\\]]*)\\]:\\s+<?([^\\s>]+)>?\\s*(\"([^\"]*)\")?/,_=/^!\\[([^\\]]*)\\] ?\\[([^\\]]*)\\]/,F=/^\\[([^\\]]*)\\] ?\\[([^\\]]*)\\]/,W=/(\\n|^[-*]\\s|^#|^ {2,}|^-{2,}|^>\\s)/,G=/\\t/g,Z=/(^ *\\||\\| *$)/g,q=/^ *:-+: *$/,Q=/^ *:-+ *$/,V=/^ *-+: *$/,X=\"((?:\\\\[.*?\\\\][([].*?[)\\\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|\\\\\\\\\\\\1|[\\\\s\\\\S])+?)\",J=new RegExp(`^([*_])\\\\1${X}\\\\1\\\\1(?!\\\\1)`),K=new RegExp(`^([*_])${X}\\\\1(?!\\\\1)`),Y=new RegExp(`^(==)${X}\\\\1`),ee=new RegExp(`^(~~)${X}\\\\1`),te=/^\\\\([^0-9A-Za-z\\s])/,ne=/\\\\([^0-9A-Za-z\\s])/g,re=/^([\\s\\S](?:(?!  |[0-9]\\.)[^=*_~\\-\\n<`\\\\\\[!])*)/,ie=/^\\n+/,le=/^([ \\t]*)/,oe=/\\\\([^\\\\])/g,ae=/(?:^|\\n)( *)$/,ce=\"(?:\\\\d+\\\\.)\",se=\"(?:[*+-])\";function de(e){return\"( *)(\"+(1===e?ce:se)+\") +\"}const ue=de(1),pe=de(2);function fe(e){return new RegExp(\"^\"+(1===e?ue:pe))}const he=fe(1),me=fe(2);function ge(e){return new RegExp(\"^\"+(1===e?ue:pe)+\"[^\\\\n]*(?:\\\\n(?!\\\\1\"+(1===e?ce:se)+\" )[^\\\\n]*)*(\\\\n|$)\",\"gm\")}const ye=ge(1),ke=ge(2);function xe(e){const t=1===e?ce:se;return new RegExp(\"^( *)(\"+t+\") [\\\\s\\\\S]+?(?:\\\\n{2,}(?! )(?!\\\\1\"+t+\" (?!\"+t+\" ))\\\\n*|\\\\s*\\\\n*$)\")}const be=xe(1),ve=xe(2);function Ce(e,t){const n=1===t,i=n?be:ve,l=n?ye:ke,o=n?he:me;return{match:Me(function(e,t){const n=ae.exec(t.prevCapture);return n&&(t.list||!t.inline&&!t.simple)?i.exec(e=n[1]+e):null}),order:1,parse(e,t,r){const i=n?+e[2]:void 0,a=e[0].replace(u,\"\\n\").match(l);let c=!1;return{items:a.map(function(e,n){const i=o.exec(e)[0].length,l=new RegExp(\"^ {1,\"+i+\"}\",\"gm\"),s=e.replace(l,\"\").replace(o,\"\"),d=n===a.length-1,u=-1!==s.indexOf(\"\\n\\n\")||d&&c;c=u;const p=r.inline,f=r.list;let h;r.list=!0,u?(r.inline=!1,h=ze(s)+\"\\n\\n\"):(r.inline=!0,h=ze(s));const m=t(h,r);return r.inline=p,r.list=f,m}),ordered:n,start:i}},render:(t,n,i)=>e(t.ordered?\"ol\":\"ul\",{key:i.key,start:t.type===r.orderedList?t.start:void 0},t.items.map(function(t,r){return e(\"li\",{key:r},n(t,i))}))}}const $e=new RegExp(\"^\\\\[((?:\\\\[[^\\\\]]*\\\\]|[^\\\\[\\\\]]|\\\\](?=[^\\\\[]*\\\\]))*)\\\\]\\\\(\\\\s*<?((?:\\\\([^)]*\\\\)|[^\\\\s\\\\\\\\]|\\\\\\\\.)*?)>?(?:\\\\s+['\\\"]([\\\\s\\\\S]*?)['\\\"])?\\\\s*\\\\)\"),Se=/^!\\[(.*?)\\]\\( *((?:\\([^)]*\\)|[^() ])*) *\"?([^)\"]*)?\"?\\)/,we=[p,y,k,z,A,L,H,be,ve],Ee=[...we,/^[^\\n]+(?:  \\n|\\n{2,})/,O,B,R];function ze(e){let t=e.length;for(;t>0&&e[t-1]<=\" \";)t--;return e.slice(0,t)}function Le(e){return e.replace(/[]/g,\"a\").replace(/[]/g,\"c\").replace(/[]/g,\"d\").replace(/[]/g,\"e\").replace(/[]/g,\"i\").replace(/[]/g,\"n\").replace(/[]/g,\"o\").replace(/[]/g,\"u\").replace(/[]/g,\"y\").replace(/[^a-z0-9- ]/gi,\"\").replace(/ /gi,\"-\").toLowerCase()}function Ae(e){return V.test(e)?\"right\":q.test(e)?\"center\":Q.test(e)?\"left\":null}function Oe(e,t,n,r){const i=n.inTable;n.inTable=!0;let l=[[]],o=\"\";function a(){if(!o)return;const e=l[l.length-1];e.push.apply(e,t(o,n)),o=\"\"}return e.trim().split(/(`[^`]*`|\\\\\\||\\|)/).filter(Boolean).forEach((e,t,n)=>{\"|\"===e.trim()&&(a(),r)?0!==t&&t!==n.length-1&&l.push([]):o+=e}),a(),n.inTable=i,l}function Te(e,t,n){n.inline=!0;const i=e[2]?e[2].replace(Z,\"\").split(\"|\").map(Ae):[],l=e[3]?function(e,t,n){return e.trim().split(\"\\n\").map(function(e){return Oe(e,t,n,!0)})}(e[3],t,n):[],o=Oe(e[1],t,n,!!l.length);return n.inline=!1,l.length?{align:i,cells:l,header:o,type:r.table}:{children:o,type:r.paragraph}}function Be(e,t){return null==e.align[t]?{}:{textAlign:e.align[t]}}function Me(e){return e.inline=1,e}function Re(e){return Me(function(t,n){return n.inline?e.exec(t):null})}function Ie(e){return Me(function(t,n){return n.inline||n.simple?e.exec(t):null})}function De(e){return function(t,n){return n.inline||n.simple?null:e.exec(t)}}function Ue(e){return Me(function(t){return e.exec(t)})}function Ne(e,t){if(t.inline||t.simple)return null;let n=\"\";e.split(\"\\n\").every(e=>(e+=\"\\n\",!we.some(t=>t.test(e))&&(n+=e,!!e.trim())));const r=ze(n);return\"\"==r?null:[n,,r]}const je=/(javascript|vbscript|data(?!:image)):/i;function He(e){try{const t=decodeURIComponent(e).replace(/[^A-Za-z0-9/:]/g,\"\");if(je.test(t))return null}catch(e){return null}return e}function Pe(e){return e.replace(oe,\"$1\")}function _e(e,t,n){const r=n.inline||!1,i=n.simple||!1;n.inline=!0,n.simple=!0;const l=e(t,n);return n.inline=r,n.simple=i,l}function Fe(e,t,n){const r=n.inline||!1,i=n.simple||!1;n.inline=!1,n.simple=!0;const l=e(t,n);return n.inline=r,n.simple=i,l}function We(e,t,n){const r=n.inline||!1;n.inline=!1;const i=e(t,n);return n.inline=r,i}const Ge=(e,t,n)=>({children:_e(t,e[2],n)});function Ze(){return{}}function qe(){return null}function Qe(...e){return e.filter(Boolean).join(\" \")}function Ve(e,t,n){let r=e;const i=t.split(\".\");for(;i.length&&(r=r[i[0]],void 0!==r);)i.shift();return r||n}function Xe(n=\"\",i={}){function u(e,n,...r){const l=Ve(i.overrides,`${e}.props`,{});return i.createElement(function(e,t){const n=Ve(t,e);return n?\"function\"==typeof n||\"object\"==typeof n&&\"render\"in n?n:Ve(t,`${e}.component`,e):e}(e,i.overrides),t({},n,l,{className:Qe(null==n?void 0:n.className,l.className)||void 0}),...r)}function Z(e){e=e.replace(w,\"\");let t=!1;i.forceInline?t=!0:i.forceBlock||(t=!1===W.test(e));const n=ae(oe(t?e:`${ze(e).replace(ie,\"\")}\\n\\n`,{inline:t}));for(;\"string\"==typeof n[n.length-1]&&!n[n.length-1].trim();)n.pop();if(null===i.wrapper)return n;const r=i.wrapper||(t?\"span\":\"div\");let l;if(n.length>1||i.forceWrapper)l=n;else{if(1===n.length)return l=n[0],\"string\"==typeof l?u(\"span\",{key:\"outer\"},l):l;l=null}return i.createElement(r,{key:\"outer\"},l)}function q(e,t){const n=t.match(s);return n?n.reduce(function(t,n){const r=n.indexOf(\"=\");if(-1!==r){const o=function(e){return-1!==e.indexOf(\"-\")&&null===e.match(M)&&(e=e.replace(j,function(e,t){return t.toUpperCase()})),e}(n.slice(0,r)).trim(),a=function(e){const t=e[0];return('\"'===t||\"'\"===t)&&e.length>=2&&e[e.length-1]===t?e.slice(1,-1):e}(n.slice(r+1).trim()),s=l[o]||o;if(\"ref\"===s)return t;const d=t[s]=function(e,t,n,r){return\"style\"===t?function(e){const t=[];let n=\"\",r=!1,i=!1,l=\"\";if(!e)return t;for(let o=0;o<e.length;o++){const a=e[o];if('\"'!==a&&\"'\"!==a||r||(i?a===l&&(i=!1,l=\"\"):(i=!0,l=a)),\"(\"===a&&n.endsWith(\"url\")?r=!0:\")\"===a&&r&&(r=!1),\";\"!==a||i||r)n+=a;else{const e=n.trim();if(e){const n=e.indexOf(\":\");if(n>0){const r=e.slice(0,n).trim(),i=e.slice(n+1).trim();t.push([r,i])}}n=\"\"}}const o=n.trim();if(o){const e=o.indexOf(\":\");if(e>0){const n=o.slice(0,e).trim(),r=o.slice(e+1).trim();t.push([n,r])}}return t}(n).reduce(function(t,[n,i]){return t[n.replace(/(-[a-z])/g,e=>e[1].toUpperCase())]=r(i,e,n),t},{}):-1!==c.indexOf(t)?r(n,e,t):(n.match(I)&&(n=n.slice(1,n.length-1)),\"true\"===n||\"false\"!==n&&n)}(e,o,a,i.sanitizer);\"string\"==typeof d&&(O.test(d)||R.test(d))&&(t[s]=Z(d.trim()))}else\"style\"!==n&&(t[l[n]||n]=!0);return t},{}):null}i.overrides=i.overrides||{},i.sanitizer=i.sanitizer||He,i.slugify=i.slugify||Le,i.namedCodesToUnicode=i.namedCodesToUnicode?t({},o,i.namedCodesToUnicode):o,i.createElement=i.createElement||e.createElement;const Q=[],V={},X={[r.blockQuote]:{match:De(p),order:1,parse(e,t,n){const[,r,i]=e[0].replace(f,\"\").match(h);return{alert:r,children:t(i,n)}},render(e,t,n){const l={key:n.key};return e.alert&&(l.className=\"markdown-alert-\"+i.slugify(e.alert.toLowerCase(),Le),e.children.unshift({attrs:{},children:[{type:r.text,text:e.alert}],noInnerParse:!0,type:r.htmlBlock,tag:\"header\"})),u(\"blockquote\",l,t(e.children,n))}},[r.breakLine]:{match:Ue(m),order:1,parse:Ze,render:(e,t,n)=>u(\"br\",{key:n.key})},[r.breakThematic]:{match:De(g),order:1,parse:Ze,render:(e,t,n)=>u(\"hr\",{key:n.key})},[r.codeBlock]:{match:De(k),order:0,parse:e=>({lang:void 0,text:ze(e[0].replace(/^ {4}/gm,\"\")).replace(ne,\"$1\")}),render:(e,n,r)=>u(\"pre\",{key:r.key},u(\"code\",t({},e.attrs,{className:e.lang?`lang-${e.lang}`:\"\"}),e.text))},[r.codeFenced]:{match:De(y),order:0,parse:e=>({attrs:q(\"code\",e[3]||\"\"),lang:e[2]||void 0,text:e[4],type:r.codeBlock})},[r.codeInline]:{match:Ie(x),order:3,parse:e=>({text:e[2].replace(ne,\"$1\")}),render:(e,t,n)=>u(\"code\",{key:n.key},e.text)},[r.footnote]:{match:De(C),order:0,parse:e=>(Q.push({footnote:e[2],identifier:e[1]}),{}),render:qe},[r.footnoteReference]:{match:Re($),order:1,parse:e=>({target:`#${i.slugify(e[1],Le)}`,text:e[1]}),render:(e,t,n)=>u(\"a\",{key:n.key,href:i.sanitizer(e.target,\"a\",\"href\")},u(\"sup\",{key:n.key},e.text))},[r.gfmTask]:{match:Re(E),order:1,parse:e=>({completed:\"x\"===e[1].toLowerCase()}),render:(e,t,n)=>u(\"input\",{checked:e.completed,key:n.key,readOnly:!0,type:\"checkbox\"})},[r.heading]:{match:De(i.enforceAtxHeadings?L:z),order:1,parse:(e,t,n)=>({children:_e(t,e[2],n),id:i.slugify(e[2],Le),level:e[1].length}),render:(e,t,n)=>u(`h${e.level}`,{id:e.id,key:n.key},t(e.children,n))},[r.headingSetext]:{match:De(A),order:0,parse:(e,t,n)=>({children:_e(t,e[1],n),level:\"=\"===e[2]?1:2,type:r.heading})},[r.htmlBlock]:{match:Ue(O),order:1,parse(e,t,n){const[,r]=e[3].match(le),i=new RegExp(`^${r}`,\"gm\"),l=e[3].replace(i,\"\"),o=(c=l,Ee.some(e=>e.test(c))?We:_e);var c;const s=e[1].toLowerCase(),d=-1!==a.indexOf(s),u=(d?s:e[1]).trim(),p={attrs:q(u,e[2]),noInnerParse:d,tag:u};return n.inAnchor=n.inAnchor||\"a\"===s,d?p.text=e[3]:p.children=o(t,l,n),n.inAnchor=!1,p},render:(e,n,r)=>u(e.tag,t({key:r.key},e.attrs),e.text||(e.children?n(e.children,r):\"\"))},[r.htmlSelfClosing]:{match:Ue(R),order:1,parse(e){const t=e[1].trim();return{attrs:q(t,e[2]||\"\"),tag:t}},render:(e,n,r)=>u(e.tag,t({},e.attrs,{key:r.key}))},[r.htmlComment]:{match:Ue(B),order:1,parse:()=>({}),render:qe},[r.image]:{match:Ie(Se),order:1,parse:e=>({alt:e[1],target:Pe(e[2]),title:e[3]}),render:(e,t,n)=>u(\"img\",{key:n.key,alt:e.alt||void 0,title:e.title||void 0,src:i.sanitizer(e.target,\"img\",\"src\")})},[r.link]:{match:Re($e),order:3,parse:(e,t,n)=>({children:Fe(t,e[1],n),target:Pe(e[2]),title:e[3]}),render:(e,t,n)=>u(\"a\",{key:n.key,href:i.sanitizer(e.target,\"a\",\"href\"),title:e.title},t(e.children,n))},[r.linkAngleBraceStyleDetector]:{match:Re(N),order:0,parse:e=>({children:[{text:e[1],type:r.text}],target:e[1],type:r.link})},[r.linkBareUrlDetector]:{match:Me((e,t)=>t.inAnchor||i.disableAutoLink?null:Re(D)(e,t)),order:0,parse:e=>({children:[{text:e[1],type:r.text}],target:e[1],title:void 0,type:r.link})},[r.linkMailtoDetector]:{match:Re(U),order:0,parse(e){let t=e[1],n=e[1];return d.test(n)||(n=\"mailto:\"+n),{children:[{text:t.replace(\"mailto:\",\"\"),type:r.text}],target:n,type:r.link}}},[r.orderedList]:Ce(u,1),[r.unorderedList]:Ce(u,2),[r.newlineCoalescer]:{match:De(b),order:3,parse:Ze,render:()=>\"\\n\"},[r.paragraph]:{match:Me(Ne),order:3,parse:Ge,render:(e,t,n)=>u(\"p\",{key:n.key},t(e.children,n))},[r.ref]:{match:Re(P),order:0,parse:e=>(V[e[1]]={target:e[2],title:e[4]},{}),render:qe},[r.refImage]:{match:Ie(_),order:0,parse:e=>({alt:e[1]||void 0,ref:e[2]}),render:(e,t,n)=>V[e.ref]?u(\"img\",{key:n.key,alt:e.alt,src:i.sanitizer(V[e.ref].target,\"img\",\"src\"),title:V[e.ref].title}):null},[r.refLink]:{match:Re(F),order:0,parse:(e,t,n)=>({children:t(e[1],n),fallbackChildren:e[0],ref:e[2]}),render:(e,t,n)=>V[e.ref]?u(\"a\",{key:n.key,href:i.sanitizer(V[e.ref].target,\"a\",\"href\"),title:V[e.ref].title},t(e.children,n)):u(\"span\",{key:n.key},e.fallbackChildren)},[r.table]:{match:De(H),order:1,parse:Te,render(e,t,n){const r=e;return u(\"table\",{key:n.key},u(\"thead\",null,u(\"tr\",null,r.header.map(function(e,i){return u(\"th\",{key:i,style:Be(r,i)},t(e,n))}))),u(\"tbody\",null,r.cells.map(function(e,i){return u(\"tr\",{key:i},e.map(function(e,i){return u(\"td\",{key:i,style:Be(r,i)},t(e,n))}))})))}},[r.text]:{match:Ue(re),order:4,parse:e=>({text:e[0].replace(T,(e,t)=>i.namedCodesToUnicode[t]?i.namedCodesToUnicode[t]:e)}),render:e=>e.text},[r.textBolded]:{match:Ie(J),order:2,parse:(e,t,n)=>({children:t(e[2],n)}),render:(e,t,n)=>u(\"strong\",{key:n.key},t(e.children,n))},[r.textEmphasized]:{match:Ie(K),order:3,parse:(e,t,n)=>({children:t(e[2],n)}),render:(e,t,n)=>u(\"em\",{key:n.key},t(e.children,n))},[r.textEscaped]:{match:Ie(te),order:1,parse:e=>({text:e[1],type:r.text})},[r.textMarked]:{match:Ie(Y),order:3,parse:Ge,render:(e,t,n)=>u(\"mark\",{key:n.key},t(e.children,n))},[r.textStrikethroughed]:{match:Ie(ee),order:3,parse:Ge,render:(e,t,n)=>u(\"del\",{key:n.key},t(e.children,n))}};!0===i.disableParsingRawHTML&&(delete X[r.htmlBlock],delete X[r.htmlSelfClosing]);const oe=function(e){let t=Object.keys(e);function n(r,i){let l,o,a=[],c=\"\",s=\"\";for(i.prevCapture=i.prevCapture||\"\";r;){let d=0;for(;d<t.length;){if(c=t[d],l=e[c],i.inline&&!l.match.inline){d++;continue}const u=l.match(r,i);if(u){s=u[0],i.prevCapture+=s,r=r.substring(s.length),o=l.parse(u,n,i),null==o.type&&(o.type=c),a.push(o);break}d++}}return i.prevCapture=\"\",a}return t.sort(function(t,n){let r=e[t].order,i=e[n].order;return r!==i?r-i:t<n?-1:1}),function(e,t){return n(function(e){return e.replace(v,\"\\n\").replace(S,\"\").replace(G,\"    \")}(e),t)}}(X),ae=(ce=function(e,t){return function(n,r,i){const l=e[n.type].render;return t?t(()=>l(n,r,i),n,r,i):l(n,r,i)}}(X,i.renderRule),function e(t,n={}){if(Array.isArray(t)){const r=n.key,i=[];let l=!1;for(let r=0;r<t.length;r++){n.key=r;const o=e(t[r],n),a=\"string\"==typeof o;a&&l?i[i.length-1]+=o:null!==o&&i.push(o),l=a}return n.key=r,i}return ce(t,e,n)});var ce;const se=Z(n);return Q.length?u(\"div\",null,se,u(\"footer\",{key:\"footer\"},Q.map(function(e){return u(\"div\",{id:i.slugify(e.identifier,Le),key:e.identifier},e.identifier,ae(oe(e.footnote,{inline:!0})))}))):se}export default t=>{let{children:r=\"\",options:i}=t,l=function(e,t){if(null==e)return{};var n,r,i={},l=Object.keys(e);for(r=0;r<l.length;r++)t.indexOf(n=l[r])>=0||(i[n]=e[n]);return i}(t,n);return e.cloneElement(Xe(r,i),l)};export{r as RuleType,Xe as compiler,He as sanitizer,Le as slugify};\n//# sourceMappingURL=index.modern.js.map\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport * as React from 'react';\nimport useLatest from 'use-latest';\nimport useComposedRef from 'use-composed-ref';\n\nvar HIDDEN_TEXTAREA_STYLE = {\n  'min-height': '0',\n  'max-height': 'none',\n  height: '0',\n  visibility: 'hidden',\n  overflow: 'hidden',\n  position: 'absolute',\n  'z-index': '-1000',\n  top: '0',\n  right: '0',\n  display: 'block'\n};\nvar forceHiddenStyles = function forceHiddenStyles(node) {\n  Object.keys(HIDDEN_TEXTAREA_STYLE).forEach(function (key) {\n    node.style.setProperty(key, HIDDEN_TEXTAREA_STYLE[key], 'important');\n  });\n};\nvar forceHiddenStyles$1 = forceHiddenStyles;\n\nvar hiddenTextarea = null;\nvar getHeight = function getHeight(node, sizingData) {\n  var height = node.scrollHeight;\n  if (sizingData.sizingStyle.boxSizing === 'border-box') {\n    // border-box: add border, since height = content + padding + border\n    return height + sizingData.borderSize;\n  }\n\n  // remove padding, since height = content\n  return height - sizingData.paddingSize;\n};\nfunction calculateNodeHeight(sizingData, value, minRows, maxRows) {\n  if (minRows === void 0) {\n    minRows = 1;\n  }\n  if (maxRows === void 0) {\n    maxRows = Infinity;\n  }\n  if (!hiddenTextarea) {\n    hiddenTextarea = document.createElement('textarea');\n    hiddenTextarea.setAttribute('tabindex', '-1');\n    hiddenTextarea.setAttribute('aria-hidden', 'true');\n    forceHiddenStyles$1(hiddenTextarea);\n  }\n  if (hiddenTextarea.parentNode === null) {\n    document.body.appendChild(hiddenTextarea);\n  }\n  var paddingSize = sizingData.paddingSize,\n    borderSize = sizingData.borderSize,\n    sizingStyle = sizingData.sizingStyle;\n  var boxSizing = sizingStyle.boxSizing;\n  Object.keys(sizingStyle).forEach(function (_key) {\n    var key = _key;\n    hiddenTextarea.style[key] = sizingStyle[key];\n  });\n  forceHiddenStyles$1(hiddenTextarea);\n  hiddenTextarea.value = value;\n  var height = getHeight(hiddenTextarea, sizingData);\n  // Double set and calc due to Firefox bug: https://bugzilla.mozilla.org/show_bug.cgi?id=1795904\n  hiddenTextarea.value = value;\n  height = getHeight(hiddenTextarea, sizingData);\n\n  // measure height of a textarea with a single row\n  hiddenTextarea.value = 'x';\n  var rowHeight = hiddenTextarea.scrollHeight - paddingSize;\n  var minHeight = rowHeight * minRows;\n  if (boxSizing === 'border-box') {\n    minHeight = minHeight + paddingSize + borderSize;\n  }\n  height = Math.max(minHeight, height);\n  var maxHeight = rowHeight * maxRows;\n  if (boxSizing === 'border-box') {\n    maxHeight = maxHeight + paddingSize + borderSize;\n  }\n  height = Math.min(maxHeight, height);\n  return [height, rowHeight];\n}\n\nvar noop = function noop() {};\nvar pick = function pick(props, obj) {\n  return props.reduce(function (acc, prop) {\n    acc[prop] = obj[prop];\n    return acc;\n  }, {});\n};\n\nvar SIZING_STYLE = ['borderBottomWidth', 'borderLeftWidth', 'borderRightWidth', 'borderTopWidth', 'boxSizing', 'fontFamily', 'fontSize', 'fontStyle', 'fontWeight', 'letterSpacing', 'lineHeight', 'paddingBottom', 'paddingLeft', 'paddingRight', 'paddingTop',\n// non-standard\n'tabSize', 'textIndent',\n// non-standard\n'textRendering', 'textTransform', 'width', 'wordBreak', 'wordSpacing', 'scrollbarGutter'];\nvar isIE = !!document.documentElement.currentStyle ;\nvar getSizingData = function getSizingData(node) {\n  var style = window.getComputedStyle(node);\n  if (style === null) {\n    return null;\n  }\n  var sizingStyle = pick(SIZING_STYLE, style);\n  var boxSizing = sizingStyle.boxSizing;\n\n  // probably node is detached from DOM, can't read computed dimensions\n  if (boxSizing === '') {\n    return null;\n  }\n\n  // IE (Edge has already correct behaviour) returns content width as computed width\n  // so we need to add manually padding and border widths\n  if (isIE && boxSizing === 'border-box') {\n    sizingStyle.width = parseFloat(sizingStyle.width) + parseFloat(sizingStyle.borderRightWidth) + parseFloat(sizingStyle.borderLeftWidth) + parseFloat(sizingStyle.paddingRight) + parseFloat(sizingStyle.paddingLeft) + 'px';\n  }\n  var paddingSize = parseFloat(sizingStyle.paddingBottom) + parseFloat(sizingStyle.paddingTop);\n  var borderSize = parseFloat(sizingStyle.borderBottomWidth) + parseFloat(sizingStyle.borderTopWidth);\n  return {\n    sizingStyle: sizingStyle,\n    paddingSize: paddingSize,\n    borderSize: borderSize\n  };\n};\nvar getSizingData$1 = getSizingData;\n\nfunction useListener(target, type, listener) {\n  var latestListener = useLatest(listener);\n  React.useLayoutEffect(function () {\n    var handler = function handler(ev) {\n      return latestListener.current(ev);\n    };\n    // might happen if document.fonts is not defined, for instance\n    if (!target) {\n      return;\n    }\n    target.addEventListener(type, handler);\n    return function () {\n      return target.removeEventListener(type, handler);\n    };\n  }, []);\n}\nvar useFormResetListener = function useFormResetListener(libRef, listener) {\n  useListener(document.body, 'reset', function (ev) {\n    if (libRef.current.form === ev.target) {\n      listener(ev);\n    }\n  });\n};\nvar useWindowResizeListener = function useWindowResizeListener(listener) {\n  useListener(window, 'resize', listener);\n};\nvar useFontsLoadedListener = function useFontsLoadedListener(listener) {\n  useListener(document.fonts, 'loadingdone', listener);\n};\n\nvar _excluded = [\"cacheMeasurements\", \"maxRows\", \"minRows\", \"onChange\", \"onHeightChange\"];\nvar TextareaAutosize = function TextareaAutosize(_ref, userRef) {\n  var cacheMeasurements = _ref.cacheMeasurements,\n    maxRows = _ref.maxRows,\n    minRows = _ref.minRows,\n    _ref$onChange = _ref.onChange,\n    onChange = _ref$onChange === void 0 ? noop : _ref$onChange,\n    _ref$onHeightChange = _ref.onHeightChange,\n    onHeightChange = _ref$onHeightChange === void 0 ? noop : _ref$onHeightChange,\n    props = _objectWithoutPropertiesLoose(_ref, _excluded);\n  if (props.style) {\n    if ('maxHeight' in props.style) {\n      throw new Error('Using `style.maxHeight` for <TextareaAutosize/> is not supported. Please use `maxRows`.');\n    }\n    if ('minHeight' in props.style) {\n      throw new Error('Using `style.minHeight` for <TextareaAutosize/> is not supported. Please use `minRows`.');\n    }\n  }\n  var isControlled = props.value !== undefined;\n  var libRef = React.useRef(null);\n  var ref = useComposedRef(libRef, userRef);\n  var heightRef = React.useRef(0);\n  var measurementsCacheRef = React.useRef();\n  var resizeTextarea = function resizeTextarea() {\n    var node = libRef.current;\n    var nodeSizingData = cacheMeasurements && measurementsCacheRef.current ? measurementsCacheRef.current : getSizingData$1(node);\n    if (!nodeSizingData) {\n      return;\n    }\n    measurementsCacheRef.current = nodeSizingData;\n    var _calculateNodeHeight = calculateNodeHeight(nodeSizingData, node.value || node.placeholder || 'x', minRows, maxRows),\n      height = _calculateNodeHeight[0],\n      rowHeight = _calculateNodeHeight[1];\n    if (heightRef.current !== height) {\n      heightRef.current = height;\n      node.style.setProperty('height', height + \"px\", 'important');\n      onHeightChange(height, {\n        rowHeight: rowHeight\n      });\n    }\n  };\n  var handleChange = function handleChange(event) {\n    if (!isControlled) {\n      resizeTextarea();\n    }\n    onChange(event);\n  };\n  {\n    React.useLayoutEffect(resizeTextarea);\n    useFormResetListener(libRef, function () {\n      if (!isControlled) {\n        var currentValue = libRef.current.value;\n        requestAnimationFrame(function () {\n          var node = libRef.current;\n          if (node && currentValue !== node.value) {\n            resizeTextarea();\n          }\n        });\n      }\n    });\n    useWindowResizeListener(resizeTextarea);\n    useFontsLoadedListener(resizeTextarea);\n    return /*#__PURE__*/React.createElement(\"textarea\", _extends({}, props, {\n      onChange: handleChange,\n      ref: ref\n    }));\n  }\n};\nvar index = /* #__PURE__ */React.forwardRef(TextareaAutosize);\n\nexport { index as default };\n","import React from 'react';\n\n// basically Exclude<React.ClassAttributes<T>[\"ref\"], string>\n\nvar updateRef = function updateRef(ref, value) {\n  if (typeof ref === 'function') {\n    ref(value);\n    return;\n  }\n  ref.current = value;\n};\nvar useComposedRef = function useComposedRef(libRef, userRef) {\n  var prevUserRef = React.useRef();\n  return React.useCallback(function (instance) {\n    libRef.current = instance;\n    if (prevUserRef.current) {\n      updateRef(prevUserRef.current, null);\n    }\n    prevUserRef.current = userRef;\n    if (!userRef) {\n      return;\n    }\n    updateRef(userRef, instance);\n  }, [userRef]);\n};\n\nexport { useComposedRef as default };\n","import { useLayoutEffect } from 'react';\n\nvar index = useLayoutEffect ;\n\nexport { index as default };\n","import React from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\n\nvar useLatest = function useLatest(value) {\n  var ref = React.useRef(value);\n  useIsomorphicLayoutEffect(function () {\n    ref.current = value;\n  });\n  return ref;\n};\n\nexport { useLatest as default };\n","module.exports = React;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// Previous: 1.9.8\n// Current: 2.5.0\n\nconst { render } = wp.element;\nimport ChatbotSystem from '@app/chatbot/ChatbotSystem';\nimport DiscussionsSystem from '@app/chatbot/DiscussionsSystem';\n\nfunction decodeHtmlEntities(encodedStr) {\n  const textarea = document.createElement('textarea');\n  textarea.innerHTML = encodedStr;\n  return textarea.value;\n}\n\ndocument.addEventListener('DOMContentLoaded', function() {\n\n  function processContainers(containers, component) {\n    containers.forEach((container) => {\n      const params = JSON.parse(decodeHtmlEntities(container.getAttribute('data-params')));\n      const system = JSON.parse(decodeHtmlEntities(container.getAttribute('data-system')));\n      const theme = JSON.parse(decodeHtmlEntities(container.getAttribute('data-theme')));\n      container.removeAttribute('data-params');\n      container.removeAttribute('data-system');\n      container.removeAttribute('data-theme');\n      render(component({ system, params, theme }), container);\n    });\n  }\n\n  const chatbotContainers = document.querySelectorAll('.mwai-chatbot-container');\n  processContainers(chatbotContainers, ChatbotSystem);\n\n  const discussionsContainers = document.querySelectorAll('.mwai-discussions-container');\n  processContainers(discussionsContainers, DiscussionsSystem);\n\n});\n"],"names":["useState","useRef","useEffect","wp","element","measureVolume","analyser","dataArray","getByteTimeDomainData","sum","i","length","val","Math","sqrt","AudioVisualizerTwoStreams","assistantStream","userStream","assistantColor","userColor","userUI","emoji","text","image","use","assistantUI","attackSpeed","releaseSpeed","circleSize","pulseMaxSize","assistantVolume","setAssistantVolume","userVolume","setUserVolume","assistantSmoothedRef","userSmoothedRef","audioContextRef","assistantAnalyserRef","assistantDataArrayRef","userAnalyserRef","userDataArrayRef","current","AudioContext","audioContext","assistantSource","userSource","animationFrameId","createMediaStreamSource","createAnalyser","fftSize","Uint8Array","frequencyBinCount","connect","tick","newAssistantVolume","newUserVolume","requestAnimationFrame","disconnect","cancelAnimationFrame","normAssistant","min","normUser","assistantPulseDiameter","userPulseDiameter","containerSize","userPulseStyle","width","height","borderRadius","position","top","left","transform","opacity","backgroundColor","assistantPulseStyle","userCircleStyle","display","justifyContent","alignItems","overflow","color","assistantCircleStyle","containerClass","renderUI","uiObj","React","createElement","slice","src","alt","style","className","useChatbotContext","useClasses","useMemo","ChatUploadIcon","css","state","actions","uploadedFile","busy","imageUpload","fileUpload","fileSearch","draggingType","onUploadFile","isHovering","setIsHovering","fileInputRef","hasUploadedFile","uploadedId","uploadEnabled","handleMouseEnter","handleMouseLeave","resetUpload","handleClick","localFile","click","handleFileChange","event","file","target","files","type","startsWith","imgClass","status","uploadProgress","typeClass","toLowerCase","round","disabled","onClick","onMouseEnter","onMouseLeave","cursor","ref","onChange","useContext","createContext","useCallback","processParameters","isURL","useChrono","useSpeechRecognition","doPlaceholders","applyFilters","mwaiHandleRes","mwaiFetch","randomStr","mwaiFetchUpload","isEmoji","nekoStringify","mwaiAPI","rawAiName","rawUserName","ChatbotContext","context","Error","ChatbotContextProvider","children","rest","_params$startSentence","params","system","theme","atts","timeElapsed","startChrono","stopChrono","shortcodeStyles","settings","restNonce","setRestNonce","messages","setMessages","shortcuts","setShortcuts","blocks","setBlocks","locked","setLocked","chatId","setChatId","inputText","setInputText","chatbotTriggered","setChatbotTriggered","showIconMessage","setShowIconMessage","setUploadedFile","uploadedUrl","windowed","setWindowed","open","setOpen","error","setError","setBusy","busyNonce","setBusyNonce","serverReply","setServerReply","chatbotInputRef","conversationRef","hasFocusRef","isListening","setIsListening","speechRecognitionAvailable","stream","internalId","botId","customId","userData","sessionId","contextId","pluginUrl","restUrl","debugMode","virtualKeyboardFix","virtual_keyboard_fix","typewriter","speechRecognition","speech_recognition","speechSynthesis","speech_synthesis","startSentence","trim","initialActions","initialShortcuts","initialBlocks","isMobile","document","innerWidth","processedParams","aiName","userName","guestName","aiAvatar","userAvatar","guestAvatar","textSend","textClear","textInputMaxLength","textInputPlaceholder","textCompliance","window","isWindow","copyButton","headerSubtitle","fullscreen","localMemory","localMemoryParam","icon","iconText","iconTextDelay","iconAlt","iconPosition","iconBubble","isRealtime","mode","localStorageKey","cssVariables","iconUrl","aiAvatarUrl","userAvatarUrl","guestAvatarUrl","processUrl","url","finalAiAvatarUrl","finalUserAvatarUrl","finalGuestAvatarUrl","Object","keys","reduce","acc","key","setDraggingType","isBlocked","setIsBlocked","uploadIconPosition","themeId","submitButtonConf","imageSend","imageClear","resetMessages","resetUploadedFile","freshMessages","id","role","content","who","timestamp","Date","getTime","refreshRestNonce","force","res","data","json","err","console","handleActions","handleShortcuts","handleBlocks","existingChatbotIndex","chatbots","findIndex","chatbot","setTasks","prevTasks","action","close","clear","toggle","ask","submit","lock","unlock","addBlock","block","removeBlockById","blockId","getBlocks","setContext","push","focusInput","saveMessages","localStorage","setItem","resetError","chatHistory","getItem","JSON","parse","e","lastMessage","callsCount","name","args","finalArgs","values","map","arg","stringify","log","join","eval","success","isQuerying","pop","message","reply","images","isStreaming","newMessage","onClear","removeItem","onStartRealtimeSession","body","nonce","onCommitStats","stats","refId","session","onCommitDiscussions","payload","onRealtimeFunctionCallback","functionId","functionType","functionName","functionTarget","arguments","onSubmit","textQuery","_uploadedFile$localFi","currentFile","currentImageUrl","mimeType","isImage","textDisplay","bodyMessages","freshMessageId","newFileId","streamCallback","updatedMessages","onSubmitAction","forcedText","_chatbotInputRef$curr","hasFileUploaded","activeElement","currentElement","onFileUpload","purpose","progress","runTimer","timer","setTimeout","prevOpen","clearTimeout","tasks","runTasks","task","prevBlocks","filter","Provider","value","formatAvatar","getAvatarSrc","renderAvatar","renderEmoji","fontSize","lineHeight","avatarSrc","ChatbotHeader","headerContent","timelessStyle","avatarImage","finalHeaderSubtitle","undefined","Fragment","flex","useImperativeHandle","TextAreaAutosize","Microphone","ChatbotInput","composing","setComposing","inputRef","_inputRef$current","focus","scrollTop","scrollHeight","onTypeText","classNames","placeholder","maxLength","onCompositionStart","onCompositionEnd","onKeyDown","code","shiftKey","preventDefault","active","ChatbotName","formattedOutput","isAi","isGuest","isUserData","warn","renderName","getAvatarContent","avatarEnabled","avatarUrl","fallbackUrl","altText","aiAvatarContent","userAvatarContent","AVATAR_URL","formatName","guestAvatarContent","template","entries","realPlaceholder","includes","replace","Users","Play","Pause","Square","Loader","Captions","Bug","AudioVisualizer","DEBUG_LEVELS","none","low","normal","high","verbose","CURRENT_DEBUG","debugLog","level","parseUsage","usage","input_token_details","text_tokens","textIn","audio_tokens","audioIn","cached_tokens_details","cachedText","cachedAudio","output_token_details","textOut","audioOut","text_input_tokens","audio_input_tokens","text_output_tokens","audio_output_tokens","text_cached_tokens","audio_cached_tokens","getChatbotRepresentation","getRepresentation","ChatbotRealtime","popup","isConnecting","setIsConnecting","isSessionActive","setIsSessionActive","isPaused","setIsPaused","setSessionId","whoIsSpeaking","setWhoIsSpeaking","statistics","setStatistics","processedItemIdsRef","Set","pcRef","dataChannelRef","localStreamRef","showOptions","setShowOptions","showUsers","setShowUsers","showCaptions","setShowCaptions","showStatistics","setShowStatistics","setAssistantStream","functionCallbacksRef","stopRealtimeConnection","commitStatsToServer","usageStats","enableAudioTranscription","readyState","send","input_audio_transcription","model","handleFunctionCall","callId","rawArgs","parsedArgs","fns","cb","find","f","_dataChannelRef$curre","result","functionOutput","item","call_id","output","response","instructions","startRealtimeConnection","clientSecret","pc","RTCPeerConnection","ms","navigator","mediaDevices","getUserMedia","audio","getTracks","forEach","track","addTrack","ontrack","audioEl","getElementById","srcObject","streams","dataChannel","createDataChannel","addEventListener","msg","_msg$type","isMajor","endsWith","itemId","item_id","has","add","prev","transcript","m","resp","updated","offer","createOffer","setLocalDescription","baseUrl","chosenModel","sdpResponse","fetch","method","headers","Authorization","sdp","ok","answerSDP","setRemoteDescription","stop","togglePause","tracks","getAudioTracks","enabled","handlePlay","function_callbacks","session_id","client_secret","handleStop","toggleUsers","p","toggleStatistics","toggleCaptions","pauseButtonClass","latestAssistantMessage","reversed","reverse","last","usersOptionClasses","captionsOptionClasses","statisticsOptionClasses","autoPlay","size","animation","title","compiler","BouncingDots","BlinkingCursor","ReplyActions","LinkContainer","href","isFile","String","filename","split","rel","RawMessage","onRendered","isLongProcess","matches","match","markdownOptions","options","overrides","component","a","img","props","onError","test","renderedContent","out","ImagesMessage","setImages","handleImageError","index","placeholderImage","prevImages","ChatbotReply","_message$images","mainElement","classes","isImages","classList","contains","hljs","selector","querySelectorAll","el","highlightElement","bouncingLoaderStyles","bouncingDotStyles","margin","animationDelays","delay","animationDelay","Send","Eraser","ChatbotSubmit","isFileUploading","clearMode","buttonContent","marginLeft","buttonClassName","onSubmitClick","ChatbotUI","ChatbotSystem","TransitionBlock","ChatbotTrigger","triggerContent","renderIcon","if","useLayoutEffect","Markdown","useViewport","isDocument","allowedDocumentTypes","autoScroll","setAutoScroll","themeStyle","needTools","needsFooter","timeoutRef","viewportHeight","isIOS","isAndroid","scrollableDiv","querySelector","scrollToTop","tagName","scrollTo","scrollInterval","setInterval","clearInterval","baseClasses","onScroll","clientHeight","isAtBottom","executedScripts","simpleHash","str","hash","chr","charCodeAt","executeScript","scriptContent","scriptHash","script","innerHTML","appendChild","messageList","jsxShortcuts","label","variant","iconIsURL","iconIsEmoji","customOnClick","onClickHandler","replacedOnClick","parsedFunction","Function","jsxBlocks","html","dangerouslySetInnerHTML","__html","handleDrag","dragState","stopPropagation","dataTransfer","items","handleDrop","inputClassNames","dir","disableTransition","onDrop","onDragEnter","onDragLeave","onDragOver","DiscussionsContext","useDiscussionsContext","DiscussionsContextProvider","discussions","setDiscussions","discussion","setDiscussion","hasEmptyDiscussion","some","refresh","silentRefresh","conversations","chats","conversation","extra","prevDiscussions","discussionMap","Map","disc","set","serverDisc","newDiscussions","Array","from","updatedDiscussion","refreshInterval","interval","getChatbot","MwaiAPI","onDiscussionClick","selectedDiscussion","x","onEditDiscussion","discussionToEdit","newTitle","prompt","trimmedTitle","alert","onDeleteDiscussion","discussionToDelete","confirmed","confirm","chatIds","onNewChatClick","existingEmptyDiscussion","newChatId","newDiscussion","DiscussionsUI","DiscussionsSystem","Pencil","Trash","Discussion","selected","onEdit","onDelete","hovered","setHovered","preview","messageText","substring","onDeleteClick","onEditClick","textNewChat","constructor","forms","filters","getForm","formId","addFilter","tag","callback","priority","sort","b","addAction","doAction","getInstance","instance","Mic","_extends","useInterval","savedCallback","conditionalClasses","isArray","condition","indexOf","setTimeElapsed","intervalIdRef","startTime","now","elapsedSeconds","floor","formatTime","seconds","minutes","remainingSeconds","toString","padStart","placeholders","RegExp","_params$guestName","_params$textSend","_params$textClear","_params$textInputPlac","_params$textComplianc","_params$icon","_params$iconText","_params$iconAlt","_params$iconPosition","_params$aiName","_params$userName","_params$aiAvatarUrl","_params$userAvatarUrl","_params$guestAvatarUr","_params$mode","parseInt","Boolean","_params$headerSubtitl","userAgent","onResult","setSpeechRecognitionAvailable","SpeechRecognition","webkitSpeechRecognition","recognition","handleResult","interimResults","continuous","results","finalTranscript","isFinal","start","removeEventListener","abort","shouldRender","setShouldRender","animationClass","setAnimationClass","handleTransitionEnd","onTransitionEnd","setViewportHeight","visualViewport","MSStream","viewport","handleResize","currentViewport","svgPathDefault","svgPathSuccess","svgPathError","copyStatus","setCopyStatus","hidden","setHidden","hasEnteredRef","onCopy","clipboard","writeText","svgPath","onMouseOver","xmlns","viewBox","obj","space","ignoreCircular","cache","cacheIndex","fetchRes","onStream","debugName","reader","getReader","decoder","TextDecoder","buffer","decodedContent","done","read","decode","lines","line","finalData","isStream","signal","onProgress","Promise","resolve","reject","formData","FormData","append","xhr","XMLHttpRequest","setRequestHeader","upload","onprogress","lengthComputable","percentComplete","loaded","total","toFixed","onload","jsonResponse","responseText","statusText","onerror","random","visible","setVisible","timeoutId","intervalId","v","cursorStyle","borderLeft","OutputHandler","baseClass","isError","freshClasses","wrapper","forceWrapper","emojiRegex","render","decodeHtmlEntities","encodedStr","textarea","processContainers","containers","container","getAttribute","removeAttribute","chatbotContainers","discussionsContainers"],"sourceRoot":""}